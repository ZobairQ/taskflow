{"ast":null,"code":"/**\n * InstallPrompt - Prompts user to install the PWA\n */import React,{useState,useEffect,useRef}from'react';import{useTheme}from'../../ThemeContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const InstallPrompt=()=>{const{theme}=useTheme();const[showPrompt,setShowPrompt]=useState(false);const deferredPromptRef=useRef(null);useEffect(()=>{// Check if already dismissed or installed\nconst dismissed=localStorage.getItem('pwa_install_dismissed');const isInstalled=window.matchMedia('(display-mode: standalone)').matches;if(dismissed||isInstalled){return;}const handler=e=>{e.preventDefault();deferredPromptRef.current=e;setShowPrompt(true);};window.addEventListener('beforeinstallprompt',handler);return()=>{window.removeEventListener('beforeinstallprompt',handler);};},[]);const handleInstall=async()=>{if(!deferredPromptRef.current)return;deferredPromptRef.current.prompt();const{outcome}=await deferredPromptRef.current.userChoice;if(outcome==='accepted'){console.log('PWA installed');}deferredPromptRef.current=null;setShowPrompt(false);};const handleDismiss=()=>{setShowPrompt(false);localStorage.setItem('pwa_install_dismissed','true');};if(!showPrompt)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-50 animate-in slide-in-from-bottom duration-300\",children:/*#__PURE__*/_jsx(\"div\",{className:\"rounded-2xl shadow-2xl overflow-hidden \".concat(theme==='dark'?'bg-gradient-to-r from-indigo-900 to-purple-900 border border-indigo-700':'bg-gradient-to-r from-indigo-600 to-purple-600'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 text-white\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 bg-white/20 rounded-xl\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-lg\",children:\"Install TaskFlow\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-white/80 mt-1\",children:\"Add to your home screen for quick access, offline use, and a better experience!\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDismiss,className:\"p-1 hover:bg-white/20 rounded-lg transition-colors\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M6 18L18 6M6 6l12 12\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 mt-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleDismiss,className:\"flex-1 px-4 py-2 rounded-xl bg-white/20 hover:bg-white/30 font-medium transition-colors\",children:\"Not now\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleInstall,className:\"flex-1 px-4 py-2 rounded-xl bg-white text-indigo-600 hover:bg-white/90 font-bold transition-colors\",children:\"Install\"})]})]})})});};","map":{"version":3,"names":["React","useState","useEffect","useRef","useTheme","jsx","_jsx","jsxs","_jsxs","InstallPrompt","theme","showPrompt","setShowPrompt","deferredPromptRef","dismissed","localStorage","getItem","isInstalled","window","matchMedia","matches","handler","e","preventDefault","current","addEventListener","removeEventListener","handleInstall","prompt","outcome","userChoice","console","log","handleDismiss","setItem","className","children","concat","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","onClick"],"sources":["/home/zobair-qauomi/todo_app/frontend/src/components/pwa/InstallPrompt.tsx"],"sourcesContent":["/**\n * InstallPrompt - Prompts user to install the PWA\n */\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useTheme } from '../../ThemeContext';\n\nexport const InstallPrompt: React.FC = () => {\n  const { theme } = useTheme();\n  const [showPrompt, setShowPrompt] = useState(false);\n  const deferredPromptRef = useRef<Event & { prompt: () => Promise<void>; userChoice: Promise<{ outcome: string }> } | null>(null);\n\n  useEffect(() => {\n    // Check if already dismissed or installed\n    const dismissed = localStorage.getItem('pwa_install_dismissed');\n    const isInstalled = window.matchMedia('(display-mode: standalone)').matches;\n\n    if (dismissed || isInstalled) {\n      return;\n    }\n\n    const handler = (e: Event) => {\n      e.preventDefault();\n      deferredPromptRef.current = e as Event & { prompt: () => Promise<void>; userChoice: Promise<{ outcome: string }> };\n      setShowPrompt(true);\n    };\n\n    window.addEventListener('beforeinstallprompt', handler);\n\n    return () => {\n      window.removeEventListener('beforeinstallprompt', handler);\n    };\n  }, []);\n\n  const handleInstall = async () => {\n    if (!deferredPromptRef.current) return;\n\n    deferredPromptRef.current.prompt();\n    const { outcome } = await deferredPromptRef.current.userChoice;\n\n    if (outcome === 'accepted') {\n      console.log('PWA installed');\n    }\n\n    deferredPromptRef.current = null;\n    setShowPrompt(false);\n  };\n\n  const handleDismiss = () => {\n    setShowPrompt(false);\n    localStorage.setItem('pwa_install_dismissed', 'true');\n  };\n\n  if (!showPrompt) return null;\n\n  return (\n    <div className=\"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-50 animate-in slide-in-from-bottom duration-300\">\n      <div className={`rounded-2xl shadow-2xl overflow-hidden ${\n        theme === 'dark'\n          ? 'bg-gradient-to-r from-indigo-900 to-purple-900 border border-indigo-700'\n          : 'bg-gradient-to-r from-indigo-600 to-purple-600'\n      }`}>\n        <div className=\"p-4 text-white\">\n          <div className=\"flex items-start gap-3\">\n            <div className=\"p-2 bg-white/20 rounded-xl\">\n              <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z\" />\n              </svg>\n            </div>\n            <div className=\"flex-1\">\n              <h3 className=\"font-bold text-lg\">Install TaskFlow</h3>\n              <p className=\"text-sm text-white/80 mt-1\">\n                Add to your home screen for quick access, offline use, and a better experience!\n              </p>\n            </div>\n            <button\n              onClick={handleDismiss}\n              className=\"p-1 hover:bg-white/20 rounded-lg transition-colors\"\n            >\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n              </svg>\n            </button>\n          </div>\n\n          <div className=\"flex gap-2 mt-4\">\n            <button\n              onClick={handleDismiss}\n              className=\"flex-1 px-4 py-2 rounded-xl bg-white/20 hover:bg-white/30 font-medium transition-colors\"\n            >\n              Not now\n            </button>\n            <button\n              onClick={handleInstall}\n              className=\"flex-1 px-4 py-2 rounded-xl bg-white text-indigo-600 hover:bg-white/90 font-bold transition-colors\"\n            >\n              Install\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n"],"mappings":"AAAA;AACA;AACA,GAEA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAC1D,OAASC,QAAQ,KAAQ,oBAAoB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE9C,MAAO,MAAM,CAAAC,aAAuB,CAAGA,CAAA,GAAM,CAC3C,KAAM,CAAEC,KAAM,CAAC,CAAGN,QAAQ,CAAC,CAAC,CAC5B,KAAM,CAACO,UAAU,CAAEC,aAAa,CAAC,CAAGX,QAAQ,CAAC,KAAK,CAAC,CACnD,KAAM,CAAAY,iBAAiB,CAAGV,MAAM,CAA2F,IAAI,CAAC,CAEhID,SAAS,CAAC,IAAM,CACd;AACA,KAAM,CAAAY,SAAS,CAAGC,YAAY,CAACC,OAAO,CAAC,uBAAuB,CAAC,CAC/D,KAAM,CAAAC,WAAW,CAAGC,MAAM,CAACC,UAAU,CAAC,4BAA4B,CAAC,CAACC,OAAO,CAE3E,GAAIN,SAAS,EAAIG,WAAW,CAAE,CAC5B,OACF,CAEA,KAAM,CAAAI,OAAO,CAAIC,CAAQ,EAAK,CAC5BA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBV,iBAAiB,CAACW,OAAO,CAAGF,CAAsF,CAClHV,aAAa,CAAC,IAAI,CAAC,CACrB,CAAC,CAEDM,MAAM,CAACO,gBAAgB,CAAC,qBAAqB,CAAEJ,OAAO,CAAC,CAEvD,MAAO,IAAM,CACXH,MAAM,CAACQ,mBAAmB,CAAC,qBAAqB,CAAEL,OAAO,CAAC,CAC5D,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAM,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAI,CAACd,iBAAiB,CAACW,OAAO,CAAE,OAEhCX,iBAAiB,CAACW,OAAO,CAACI,MAAM,CAAC,CAAC,CAClC,KAAM,CAAEC,OAAQ,CAAC,CAAG,KAAM,CAAAhB,iBAAiB,CAACW,OAAO,CAACM,UAAU,CAE9D,GAAID,OAAO,GAAK,UAAU,CAAE,CAC1BE,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC,CAC9B,CAEAnB,iBAAiB,CAACW,OAAO,CAAG,IAAI,CAChCZ,aAAa,CAAC,KAAK,CAAC,CACtB,CAAC,CAED,KAAM,CAAAqB,aAAa,CAAGA,CAAA,GAAM,CAC1BrB,aAAa,CAAC,KAAK,CAAC,CACpBG,YAAY,CAACmB,OAAO,CAAC,uBAAuB,CAAE,MAAM,CAAC,CACvD,CAAC,CAED,GAAI,CAACvB,UAAU,CAAE,MAAO,KAAI,CAE5B,mBACEL,IAAA,QAAK6B,SAAS,CAAC,iHAAiH,CAAAC,QAAA,cAC9H9B,IAAA,QAAK6B,SAAS,2CAAAE,MAAA,CACZ3B,KAAK,GAAK,MAAM,CACZ,yEAAyE,CACzE,gDAAgD,CACnD,CAAA0B,QAAA,cACD5B,KAAA,QAAK2B,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7B5B,KAAA,QAAK2B,SAAS,CAAC,wBAAwB,CAAAC,QAAA,eACrC9B,IAAA,QAAK6B,SAAS,CAAC,4BAA4B,CAAAC,QAAA,cACzC9B,IAAA,QAAK6B,SAAS,CAAC,SAAS,CAACG,IAAI,CAAC,MAAM,CAACC,MAAM,CAAC,cAAc,CAACC,OAAO,CAAC,WAAW,CAAAJ,QAAA,cAC5E9B,IAAA,SAAMmC,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAACC,WAAW,CAAE,CAAE,CAACC,CAAC,CAAC,6EAA6E,CAAE,CAAC,CAClJ,CAAC,CACH,CAAC,cACNpC,KAAA,QAAK2B,SAAS,CAAC,QAAQ,CAAAC,QAAA,eACrB9B,IAAA,OAAI6B,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAAC,kBAAgB,CAAI,CAAC,cACvD9B,IAAA,MAAG6B,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,iFAE1C,CAAG,CAAC,EACD,CAAC,cACN9B,IAAA,WACEuC,OAAO,CAAEZ,aAAc,CACvBE,SAAS,CAAC,oDAAoD,CAAAC,QAAA,cAE9D9B,IAAA,QAAK6B,SAAS,CAAC,SAAS,CAACG,IAAI,CAAC,MAAM,CAACC,MAAM,CAAC,cAAc,CAACC,OAAO,CAAC,WAAW,CAAAJ,QAAA,cAC5E9B,IAAA,SAAMmC,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAACC,WAAW,CAAE,CAAE,CAACC,CAAC,CAAC,sBAAsB,CAAE,CAAC,CAC3F,CAAC,CACA,CAAC,EACN,CAAC,cAENpC,KAAA,QAAK2B,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9B9B,IAAA,WACEuC,OAAO,CAAEZ,aAAc,CACvBE,SAAS,CAAC,yFAAyF,CAAAC,QAAA,CACpG,SAED,CAAQ,CAAC,cACT9B,IAAA,WACEuC,OAAO,CAAElB,aAAc,CACvBQ,SAAS,CAAC,oGAAoG,CAAAC,QAAA,CAC/G,SAED,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,CACH,CAAC,CACH,CAAC,CAEV,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}