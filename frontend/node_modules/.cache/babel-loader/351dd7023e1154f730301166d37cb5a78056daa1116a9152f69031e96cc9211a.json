{"ast":null,"code":"/**\n * CSV Exporter - Export tasks to CSV format\n *//**\n * Convert task to CSV row\n */function taskToCSVRow(task,includeSubtasks){var _task$subtasks,_task$subtasks2;const escapeCSV=value=>{if(value===null||value===undefined)return'';const str=String(value);// Escape quotes and wrap in quotes if contains comma, quote, or newline\nif(str.includes(',')||str.includes('\"')||str.includes('\\n')){return\"\\\"\".concat(str.replace(/\"/g,'\"\"'),\"\\\"\");}return str;};const status=task.completed?'completed':task.status||'pending';const dueDate=task.dueDate||'';const completedAt=task.completedAt?new Date(task.completedAt).toISOString():'';const description=task.description||'';const subtasksCount=((_task$subtasks=task.subtasks)===null||_task$subtasks===void 0?void 0:_task$subtasks.length)||0;const subtasksCompleted=((_task$subtasks2=task.subtasks)===null||_task$subtasks2===void 0?void 0:_task$subtasks2.filter(s=>s.completed).length)||0;const row=[escapeCSV(task.id),escapeCSV(task.text),escapeCSV(description),escapeCSV(task.priority),escapeCSV(status),escapeCSV(task.category),escapeCSV(dueDate),escapeCSV(new Date(task.createdAt).toISOString()),escapeCSV(completedAt),escapeCSV(subtasksCount),escapeCSV(subtasksCompleted),escapeCSV(task.isRecurring?'Yes':'No')];return row.join(',');}/**\n * Get CSV headers\n */function getCSVHeaders(){return['ID','Task','Description','Priority','Status','Category','Due Date','Created At','Completed At','Subtasks Total','Subtasks Completed','Recurring'].join(',');}/**\n * Export tasks to CSV format\n */export function exportToCSV(tasks,options){// Filter tasks based on options\nlet filteredTasks=[...tasks];// Filter by completion status\nif(!options.includeCompleted){filteredTasks=filteredTasks.filter(t=>!t.completed);}// Filter by date range\nif(options.dateRange){const startDate=new Date(options.dateRange.start).getTime();const endDate=new Date(options.dateRange.end).getTime();filteredTasks=filteredTasks.filter(t=>{const taskDate=new Date(t.createdAt).getTime();return taskDate>=startDate&&taskDate<=endDate;});}// Sort by creation date (newest first)\nfilteredTasks.sort((a,b)=>new Date(b.createdAt).getTime()-new Date(a.createdAt).getTime());// Build CSV content\nconst headers=getCSVHeaders();const rows=filteredTasks.map(task=>taskToCSVRow(task,options.includeSubtasks));return[headers,...rows].join('\\n');}/**\n * Download CSV file\n */export function downloadCSV(content){let filename=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'taskflow-export.csv';const blob=new Blob(['\\ufeff'+content],{type:'text/csv;charset=utf-8;'});const url=URL.createObjectURL(blob);const link=document.createElement('a');link.href=url;link.download=filename;document.body.appendChild(link);link.click();document.body.removeChild(link);URL.revokeObjectURL(url);}/**\n * Get CSV statistics\n */export function getCSVStats(tasks,options){let filteredTasks=[...tasks];if(options.dateRange){const startDate=new Date(options.dateRange.start).getTime();const endDate=new Date(options.dateRange.end).getTime();filteredTasks=filteredTasks.filter(t=>{const createdTime=new Date(t.createdAt).getTime();return createdTime>=startDate&&createdTime<=endDate;});}return{totalTasks:filteredTasks.length,completedTasks:filteredTasks.filter(t=>t.completed).length,pendingTasks:filteredTasks.filter(t=>!t.completed).length,highPriority:filteredTasks.filter(t=>t.priority==='high').length,withDueDates:filteredTasks.filter(t=>t.dueDate).length};}","map":{"version":3,"names":["taskToCSVRow","task","includeSubtasks","_task$subtasks","_task$subtasks2","escapeCSV","value","undefined","str","String","includes","concat","replace","status","completed","dueDate","completedAt","Date","toISOString","description","subtasksCount","subtasks","length","subtasksCompleted","filter","s","row","id","text","priority","category","createdAt","isRecurring","join","getCSVHeaders","exportToCSV","tasks","options","filteredTasks","includeCompleted","t","dateRange","startDate","start","getTime","endDate","end","taskDate","sort","a","b","headers","rows","map","downloadCSV","content","filename","arguments","blob","Blob","type","url","URL","createObjectURL","link","document","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL","getCSVStats","createdTime","totalTasks","completedTasks","pendingTasks","highPriority","withDueDates"],"sources":["/home/zobair-qauomi/todo_app/frontend/src/utils/export/csvExporter.ts"],"sourcesContent":["/**\n * CSV Exporter - Export tasks to CSV format\n */\n\nimport { Task } from '../../types/task.types';\nimport { ExportOptions } from '../../types/importExport.types';\n\n/**\n * Convert task to CSV row\n */\nfunction taskToCSVRow(task: Task, includeSubtasks: boolean): string {\n  const escapeCSV = (value: string | number | boolean | null | undefined): string => {\n    if (value === null || value === undefined) return '';\n    const str = String(value);\n    // Escape quotes and wrap in quotes if contains comma, quote, or newline\n    if (str.includes(',') || str.includes('\"') || str.includes('\\n')) {\n      return `\"${str.replace(/\"/g, '\"\"')}\"`;\n    }\n    return str;\n  };\n\n  const status = task.completed ? 'completed' : (task.status || 'pending');\n  const dueDate = task.dueDate || '';\n  const completedAt = task.completedAt ? new Date(task.completedAt).toISOString() : '';\n  const description = task.description || '';\n  const subtasksCount = task.subtasks?.length || 0;\n  const subtasksCompleted = task.subtasks?.filter(s => s.completed).length || 0;\n\n  const row = [\n    escapeCSV(task.id),\n    escapeCSV(task.text),\n    escapeCSV(description),\n    escapeCSV(task.priority),\n    escapeCSV(status),\n    escapeCSV(task.category),\n    escapeCSV(dueDate),\n    escapeCSV(new Date(task.createdAt).toISOString()),\n    escapeCSV(completedAt),\n    escapeCSV(subtasksCount),\n    escapeCSV(subtasksCompleted),\n    escapeCSV(task.isRecurring ? 'Yes' : 'No'),\n  ];\n\n  return row.join(',');\n}\n\n/**\n * Get CSV headers\n */\nfunction getCSVHeaders(): string {\n  return [\n    'ID',\n    'Task',\n    'Description',\n    'Priority',\n    'Status',\n    'Category',\n    'Due Date',\n    'Created At',\n    'Completed At',\n    'Subtasks Total',\n    'Subtasks Completed',\n    'Recurring',\n  ].join(',');\n}\n\n/**\n * Export tasks to CSV format\n */\nexport function exportToCSV(tasks: Task[], options: ExportOptions): string {\n  // Filter tasks based on options\n  let filteredTasks = [...tasks];\n\n  // Filter by completion status\n  if (!options.includeCompleted) {\n    filteredTasks = filteredTasks.filter(t => !t.completed);\n  }\n\n  // Filter by date range\n  if (options.dateRange) {\n    const startDate = new Date(options.dateRange.start).getTime();\n    const endDate = new Date(options.dateRange.end).getTime();\n    filteredTasks = filteredTasks.filter(t => {\n      const taskDate = new Date(t.createdAt).getTime();\n      return taskDate >= startDate && taskDate <= endDate;\n    });\n  }\n\n  // Sort by creation date (newest first)\n  filteredTasks.sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n\n  // Build CSV content\n  const headers = getCSVHeaders();\n  const rows = filteredTasks.map(task => taskToCSVRow(task, options.includeSubtasks));\n\n  return [headers, ...rows].join('\\n');\n}\n\n/**\n * Download CSV file\n */\nexport function downloadCSV(content: string, filename: string = 'taskflow-export.csv'): void {\n  const blob = new Blob(['\\ufeff' + content], { type: 'text/csv;charset=utf-8;' });\n  const url = URL.createObjectURL(blob);\n  const link = document.createElement('a');\n  link.href = url;\n  link.download = filename;\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n  URL.revokeObjectURL(url);\n}\n\n/**\n * Get CSV statistics\n */\nexport function getCSVStats(tasks: Task[], options: ExportOptions): {\n  totalTasks: number;\n  completedTasks: number;\n  pendingTasks: number;\n  highPriority: number;\n  withDueDates: number;\n} {\n  let filteredTasks = [...tasks];\n\n  if (options.dateRange) {\n    const startDate = new Date(options.dateRange.start).getTime();\n    const endDate = new Date(options.dateRange.end).getTime();\n    filteredTasks = filteredTasks.filter(t => {\n      const createdTime = new Date(t.createdAt).getTime();\n      return createdTime >= startDate && createdTime <= endDate;\n    });\n  }\n\n  return {\n    totalTasks: filteredTasks.length,\n    completedTasks: filteredTasks.filter(t => t.completed).length,\n    pendingTasks: filteredTasks.filter(t => !t.completed).length,\n    highPriority: filteredTasks.filter(t => t.priority === 'high').length,\n    withDueDates: filteredTasks.filter(t => t.dueDate).length,\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}