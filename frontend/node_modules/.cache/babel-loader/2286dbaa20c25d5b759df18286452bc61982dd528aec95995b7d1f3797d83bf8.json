{"ast":null,"code":"/**\n * TaskBoard - Kanban-style board view with drag and drop\n */import React from'react';import{DndContext,DragOverlay,closestCenter,KeyboardSensor,PointerSensor,useSensor,useSensors}from'@dnd-kit/core';import{useTheme}from'../../ThemeContext';import{getTaskStatus}from'../../utils/taskUtils';import{DroppableZone}from'../dnd/DroppableZone';import{TaskCard}from'./TaskCard';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const TaskBoard=_ref=>{let{tasks,onToggle,onStatusChange,onDelete,onViewDetails}=_ref;const{theme}=useTheme();const[activeId,setActiveId]=React.useState(null);// Configure sensors with activation constraint\n// This allows clicks to work while still enabling drag after moving 8px\nconst sensors=useSensors(useSensor(PointerSensor,{activationConstraint:{distance:8// Require 8px movement before drag starts\n}}),useSensor(KeyboardSensor));// Group tasks by status\nconst pendingTasks=tasks.filter(t=>getTaskStatus(t)==='pending');const inProgressTasks=tasks.filter(t=>getTaskStatus(t)==='in_progress');const completedTasks=tasks.filter(t=>getTaskStatus(t)==='completed');const handleDragStart=event=>{setActiveId(event.active.id);};const handleDragEnd=event=>{var _over$data,_over$data$current;const{active,over}=event;if(!over){setActiveId(null);return;}// Handle drop on status zone\nif(((_over$data=over.data)===null||_over$data===void 0?void 0:(_over$data$current=_over$data.current)===null||_over$data$current===void 0?void 0:_over$data$current.type)==='zone'){const newStatus=over.data.current.status;const taskId=Number(active.id);if(!isNaN(taskId)){onStatusChange(taskId,newStatus);}}setActiveId(null);};const activeTask=activeId?tasks.find(t=>t.id.toString()===activeId):null;return/*#__PURE__*/_jsxs(DndContext,{sensors:sensors,collisionDetection:closestCenter,onDragStart:handleDragStart,onDragEnd:handleDragEnd,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4 h-full overflow-x-auto pb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 min-w-[280px] max-w-[350px]\",children:/*#__PURE__*/_jsx(DroppableZone,{id:\"pending\",status:\"pending\",label:\"To Do\",count:pendingTasks.length,colorClass:\"border-amber-200 dark:border-amber-700 bg-amber-50 dark:bg-amber-900/30\",children:pendingTasks.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-slate-400 dark:text-slate-500 text-sm\",children:\"No pending tasks\"}):pendingTasks.map(task=>/*#__PURE__*/_jsx(TaskCard,{task:task,onToggle:onToggle,onDelete:onDelete,onViewDetails:onViewDetails},task.id))})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 min-w-[280px] max-w-[350px]\",children:/*#__PURE__*/_jsx(DroppableZone,{id:\"in_progress\",status:\"in_progress\",label:\"In Progress\",count:inProgressTasks.length,colorClass:\"border-blue-200 dark:border-blue-700 bg-blue-50 dark:bg-blue-900/30\",children:inProgressTasks.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-slate-400 dark:text-slate-500 text-sm\",children:\"No tasks in progress\"}):inProgressTasks.map(task=>/*#__PURE__*/_jsx(TaskCard,{task:task,onToggle:onToggle,onDelete:onDelete,onViewDetails:onViewDetails},task.id))})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 min-w-[280px] max-w-[350px]\",children:/*#__PURE__*/_jsx(DroppableZone,{id:\"completed\",status:\"completed\",label:\"Done\",count:completedTasks.length,colorClass:\"border-emerald-200 dark:border-emerald-700 bg-emerald-50 dark:bg-emerald-900/30\",children:completedTasks.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-slate-400 dark:text-slate-500 text-sm\",children:\"No completed tasks\"}):completedTasks.map(task=>/*#__PURE__*/_jsx(TaskCard,{task:task,onToggle:onToggle,onDelete:onDelete,onViewDetails:onViewDetails},task.id))})})]}),/*#__PURE__*/_jsx(DragOverlay,{children:activeTask&&/*#__PURE__*/_jsx(\"div\",{className:\"opacity-90 rotate-3 shadow-2xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 rounded-lg border-2 border-indigo-400 \".concat(theme==='dark'?'bg-slate-700':'bg-white'),children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium \".concat(theme==='dark'?'text-slate-200':'text-slate-800'),children:activeTask.text}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs mt-1 \".concat(theme==='dark'?'text-slate-400':'text-slate-500'),children:[activeTask.priority,\" priority\"]})]})})})]});};","map":{"version":3,"names":["React","DndContext","DragOverlay","closestCenter","KeyboardSensor","PointerSensor","useSensor","useSensors","useTheme","getTaskStatus","DroppableZone","TaskCard","jsx","_jsx","jsxs","_jsxs","TaskBoard","_ref","tasks","onToggle","onStatusChange","onDelete","onViewDetails","theme","activeId","setActiveId","useState","sensors","activationConstraint","distance","pendingTasks","filter","t","inProgressTasks","completedTasks","handleDragStart","event","active","id","handleDragEnd","_over$data","_over$data$current","over","data","current","type","newStatus","status","taskId","Number","isNaN","activeTask","find","toString","collisionDetection","onDragStart","onDragEnd","children","className","label","count","length","colorClass","map","task","concat","text","priority"],"sources":["/home/zobair-qauomi/todo_app/frontend/src/components/tasks/TaskBoard.tsx"],"sourcesContent":["/**\n * TaskBoard - Kanban-style board view with drag and drop\n */\n\nimport React from 'react';\nimport {\n  DndContext,\n  DragOverlay,\n  closestCenter,\n  KeyboardSensor,\n  PointerSensor,\n  useSensor,\n  useSensors,\n  DragStartEvent,\n  DragEndEvent,\n  UniqueIdentifier,\n} from '@dnd-kit/core';\nimport { useTheme } from '../../ThemeContext';\nimport { Task } from '../../ProjectContext';\nimport { TaskStatus } from '../../types';\nimport { getTaskStatus } from '../../utils/taskUtils';\nimport { DroppableZone } from '../dnd/DroppableZone';\nimport { TaskCard } from './TaskCard';\n\ninterface TaskBoardProps {\n  tasks: Task[];\n  onToggle: (id: number) => void;\n  onStatusChange: (id: number, status: TaskStatus) => void;\n  onDelete: (id: number) => void;\n  onViewDetails: (task: Task) => void;\n}\n\nexport const TaskBoard: React.FC<TaskBoardProps> = ({\n  tasks,\n  onToggle,\n  onStatusChange,\n  onDelete,\n  onViewDetails,\n}) => {\n  const { theme } = useTheme();\n  const [activeId, setActiveId] = React.useState<UniqueIdentifier | null>(null);\n\n  // Configure sensors with activation constraint\n  // This allows clicks to work while still enabling drag after moving 8px\n  const sensors = useSensors(\n    useSensor(PointerSensor, {\n      activationConstraint: {\n        distance: 8, // Require 8px movement before drag starts\n      },\n    }),\n    useSensor(KeyboardSensor)\n  );\n\n  // Group tasks by status\n  const pendingTasks = tasks.filter((t) => getTaskStatus(t) === 'pending');\n  const inProgressTasks = tasks.filter((t) => getTaskStatus(t) === 'in_progress');\n  const completedTasks = tasks.filter((t) => getTaskStatus(t) === 'completed');\n\n  const handleDragStart = (event: DragStartEvent) => {\n    setActiveId(event.active.id);\n  };\n\n  const handleDragEnd = (event: DragEndEvent) => {\n    const { active, over } = event;\n\n    if (!over) {\n      setActiveId(null);\n      return;\n    }\n\n    // Handle drop on status zone\n    if (over.data?.current?.type === 'zone') {\n      const newStatus = over.data.current.status as TaskStatus;\n      const taskId = Number(active.id);\n      if (!isNaN(taskId)) {\n        onStatusChange(taskId, newStatus);\n      }\n    }\n\n    setActiveId(null);\n  };\n\n  const activeTask = activeId ? tasks.find((t) => t.id.toString() === activeId) : null;\n\n  return (\n    <DndContext\n      sensors={sensors}\n      collisionDetection={closestCenter}\n      onDragStart={handleDragStart}\n      onDragEnd={handleDragEnd}\n    >\n      <div className=\"flex gap-4 h-full overflow-x-auto pb-4\">\n        {/* To Do Column */}\n        <div className=\"flex-1 min-w-[280px] max-w-[350px]\">\n          <DroppableZone\n            id=\"pending\"\n            status=\"pending\"\n            label=\"To Do\"\n            count={pendingTasks.length}\n            colorClass=\"border-amber-200 dark:border-amber-700 bg-amber-50 dark:bg-amber-900/30\"\n          >\n            {pendingTasks.length === 0 ? (\n              <div className=\"text-center py-8 text-slate-400 dark:text-slate-500 text-sm\">\n                No pending tasks\n              </div>\n            ) : (\n              pendingTasks.map((task) => (\n                <TaskCard\n                  key={task.id}\n                  task={task}\n                  onToggle={onToggle}\n                  onDelete={onDelete}\n                  onViewDetails={onViewDetails}\n                />\n              ))\n            )}\n          </DroppableZone>\n        </div>\n\n        {/* In Progress Column */}\n        <div className=\"flex-1 min-w-[280px] max-w-[350px]\">\n          <DroppableZone\n            id=\"in_progress\"\n            status=\"in_progress\"\n            label=\"In Progress\"\n            count={inProgressTasks.length}\n            colorClass=\"border-blue-200 dark:border-blue-700 bg-blue-50 dark:bg-blue-900/30\"\n          >\n            {inProgressTasks.length === 0 ? (\n              <div className=\"text-center py-8 text-slate-400 dark:text-slate-500 text-sm\">\n                No tasks in progress\n              </div>\n            ) : (\n              inProgressTasks.map((task) => (\n                <TaskCard\n                  key={task.id}\n                  task={task}\n                  onToggle={onToggle}\n                  onDelete={onDelete}\n                  onViewDetails={onViewDetails}\n                />\n              ))\n            )}\n          </DroppableZone>\n        </div>\n\n        {/* Done Column */}\n        <div className=\"flex-1 min-w-[280px] max-w-[350px]\">\n          <DroppableZone\n            id=\"completed\"\n            status=\"completed\"\n            label=\"Done\"\n            count={completedTasks.length}\n            colorClass=\"border-emerald-200 dark:border-emerald-700 bg-emerald-50 dark:bg-emerald-900/30\"\n          >\n            {completedTasks.length === 0 ? (\n              <div className=\"text-center py-8 text-slate-400 dark:text-slate-500 text-sm\">\n                No completed tasks\n              </div>\n            ) : (\n              completedTasks.map((task) => (\n                <TaskCard\n                  key={task.id}\n                  task={task}\n                  onToggle={onToggle}\n                  onDelete={onDelete}\n                  onViewDetails={onViewDetails}\n                />\n              ))\n            )}\n          </DroppableZone>\n        </div>\n      </div>\n\n      {/* Drag Overlay */}\n      <DragOverlay>\n        {activeTask && (\n          <div className=\"opacity-90 rotate-3 shadow-2xl\">\n            <div className={`p-3 rounded-lg border-2 border-indigo-400 ${\n              theme === 'dark' ? 'bg-slate-700' : 'bg-white'\n            }`}>\n              <p className={`text-sm font-medium ${theme === 'dark' ? 'text-slate-200' : 'text-slate-800'}`}>\n                {activeTask.text}\n              </p>\n              <p className={`text-xs mt-1 ${theme === 'dark' ? 'text-slate-400' : 'text-slate-500'}`}>\n                {activeTask.priority} priority\n              </p>\n            </div>\n          </div>\n        )}\n      </DragOverlay>\n    </DndContext>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}