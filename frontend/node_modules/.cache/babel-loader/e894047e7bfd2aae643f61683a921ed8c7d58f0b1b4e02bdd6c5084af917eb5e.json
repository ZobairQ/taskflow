{"ast":null,"code":"/**\n * Time tracking utility functions\n *//**\n * Format seconds to MM:SS display\n */export function formatTime(seconds){const mins=Math.floor(seconds/60);const secs=seconds%60;return\"\".concat(mins.toString().padStart(2,'0'),\":\").concat(secs.toString().padStart(2,'0'));}/**\n * Format minutes to human readable string\n */export function formatDuration(minutes){if(minutes<60){return\"\".concat(minutes,\"m\");}const hours=Math.floor(minutes/60);const mins=minutes%60;return mins>0?\"\".concat(hours,\"h \").concat(mins,\"m\"):\"\".concat(hours,\"h\");}/**\n * Get phase duration in seconds based on settings\n */export function getPhaseDuration(phase,settings){switch(phase){case'work':return settings.workDuration*60;case'shortBreak':return settings.shortBreakDuration*60;case'longBreak':return settings.longBreakDuration*60;default:return settings.workDuration*60;}}/**\n * Calculate the next phase after completing current phase\n */export function getNextPhase(currentPhase,completedWorkSessions,settings){if(currentPhase==='work'){// After work, take a break\nif(completedWorkSessions%settings.sessionsBeforeLongBreak===0){return'longBreak';}return'shortBreak';}// After break, always return to work\nreturn'work';}/**\n * Get phase label for display\n */export function getPhaseLabel(phase){switch(phase){case'work':return'Focus Time';case'shortBreak':return'Short Break';case'longBreak':return'Long Break';default:return'Focus Time';}}/**\n * Get color for phase\n */export function getPhaseColor(phase){switch(phase){case'work':return'from-rose-500 to-orange-500';case'shortBreak':return'from-emerald-500 to-teal-500';case'longBreak':return'from-blue-500 to-indigo-500';default:return'from-rose-500 to-orange-500';}}/**\n * Calculate timer statistics from sessions\n */export function calculateTimerStats(sessions){const now=new Date();const today=new Date(now.getFullYear(),now.getMonth(),now.getDate());const weekAgo=new Date(today.getTime()-7*24*60*60*1000);// Filter completed work sessions\nconst completedWorkSessions=sessions.filter(s=>s.type==='work'&&s.completed);// Today's minutes\nconst todaySessions=completedWorkSessions.filter(s=>{const sessionDate=new Date(s.startTime);return sessionDate>=today;});const todayMinutes=Math.round(todaySessions.reduce((acc,s)=>acc+s.duration,0)/60);// Week's minutes\nconst weekSessions=completedWorkSessions.filter(s=>{const sessionDate=new Date(s.startTime);return sessionDate>=weekAgo;});const weekMinutes=Math.round(weekSessions.reduce((acc,s)=>acc+s.duration,0)/60);// Calculate streak (consecutive days with at least one session)\nconst sessionDays=new Set();completedWorkSessions.forEach(s=>{const date=new Date(s.startTime).toDateString();sessionDays.add(date);});let currentStreak=0;let checkDate=new Date(today);while(sessionDays.has(checkDate.toDateString())){currentStreak++;checkDate.setDate(checkDate.getDate()-1);}// Average session length\nconst avgSession=completedWorkSessions.length>0?Math.round(completedWorkSessions.reduce((acc,s)=>acc+s.duration,0)/completedWorkSessions.length/60):0;return{todayMinutes,weekMinutes,totalSessions:completedWorkSessions.length,currentStreak,averageSessionLength:avgSession};}/**\n * Generate a unique session ID\n */export function generateSessionId(){return\"\".concat(Date.now(),\"-\").concat(Math.random().toString(36).substr(2,9));}/**\n * Play notification sound\n */export function playNotificationSound(){try{// Create a simple beep sound using Web Audio API\nconst audioContext=new(window.AudioContext||window.webkitAudioContext)();const oscillator=audioContext.createOscillator();const gainNode=audioContext.createGain();oscillator.connect(gainNode);gainNode.connect(audioContext.destination);oscillator.frequency.value=800;oscillator.type='sine';gainNode.gain.value=0.3;oscillator.start();oscillator.stop(audioContext.currentTime+0.2);}catch(e){// Audio not supported or blocked\nconsole.log('Audio notification not available');}}/**\n * Request browser notification permission\n */export async function requestNotificationPermission(){if(!('Notification'in window)){return false;}if(Notification.permission==='granted'){return true;}if(Notification.permission!=='denied'){const permission=await Notification.requestPermission();return permission==='granted';}return false;}/**\n * Show browser notification\n */export function showNotification(title,body){if(Notification.permission==='granted'){new Notification(title,{body,icon:'/favicon.ico',badge:'/favicon.ico'});}}","map":{"version":3,"names":["formatTime","seconds","mins","Math","floor","secs","concat","toString","padStart","formatDuration","minutes","hours","getPhaseDuration","phase","settings","workDuration","shortBreakDuration","longBreakDuration","getNextPhase","currentPhase","completedWorkSessions","sessionsBeforeLongBreak","getPhaseLabel","getPhaseColor","calculateTimerStats","sessions","now","Date","today","getFullYear","getMonth","getDate","weekAgo","getTime","filter","s","type","completed","todaySessions","sessionDate","startTime","todayMinutes","round","reduce","acc","duration","weekSessions","weekMinutes","sessionDays","Set","forEach","date","toDateString","add","currentStreak","checkDate","has","setDate","avgSession","length","totalSessions","averageSessionLength","generateSessionId","random","substr","playNotificationSound","audioContext","window","AudioContext","webkitAudioContext","oscillator","createOscillator","gainNode","createGain","connect","destination","frequency","value","gain","start","stop","currentTime","e","console","log","requestNotificationPermission","Notification","permission","requestPermission","showNotification","title","body","icon","badge"],"sources":["/home/zobair-qauomi/todo_app/frontend/src/utils/timeTracking.ts"],"sourcesContent":["/**\n * Time tracking utility functions\n */\n\nimport {\n  PomodoroSettings,\n  PomodoroPhase,\n  PomodoroSession,\n  TimerStats,\n} from '../types/timer.types';\n\n/**\n * Format seconds to MM:SS display\n */\nexport function formatTime(seconds: number): string {\n  const mins = Math.floor(seconds / 60);\n  const secs = seconds % 60;\n  return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n}\n\n/**\n * Format minutes to human readable string\n */\nexport function formatDuration(minutes: number): string {\n  if (minutes < 60) {\n    return `${minutes}m`;\n  }\n  const hours = Math.floor(minutes / 60);\n  const mins = minutes % 60;\n  return mins > 0 ? `${hours}h ${mins}m` : `${hours}h`;\n}\n\n/**\n * Get phase duration in seconds based on settings\n */\nexport function getPhaseDuration(phase: PomodoroPhase, settings: PomodoroSettings): number {\n  switch (phase) {\n    case 'work':\n      return settings.workDuration * 60;\n    case 'shortBreak':\n      return settings.shortBreakDuration * 60;\n    case 'longBreak':\n      return settings.longBreakDuration * 60;\n    default:\n      return settings.workDuration * 60;\n  }\n}\n\n/**\n * Calculate the next phase after completing current phase\n */\nexport function getNextPhase(\n  currentPhase: PomodoroPhase,\n  completedWorkSessions: number,\n  settings: PomodoroSettings\n): PomodoroPhase {\n  if (currentPhase === 'work') {\n    // After work, take a break\n    if (completedWorkSessions % settings.sessionsBeforeLongBreak === 0) {\n      return 'longBreak';\n    }\n    return 'shortBreak';\n  }\n  // After break, always return to work\n  return 'work';\n}\n\n/**\n * Get phase label for display\n */\nexport function getPhaseLabel(phase: PomodoroPhase): string {\n  switch (phase) {\n    case 'work':\n      return 'Focus Time';\n    case 'shortBreak':\n      return 'Short Break';\n    case 'longBreak':\n      return 'Long Break';\n    default:\n      return 'Focus Time';\n  }\n}\n\n/**\n * Get color for phase\n */\nexport function getPhaseColor(phase: PomodoroPhase): string {\n  switch (phase) {\n    case 'work':\n      return 'from-rose-500 to-orange-500';\n    case 'shortBreak':\n      return 'from-emerald-500 to-teal-500';\n    case 'longBreak':\n      return 'from-blue-500 to-indigo-500';\n    default:\n      return 'from-rose-500 to-orange-500';\n  }\n}\n\n/**\n * Calculate timer statistics from sessions\n */\nexport function calculateTimerStats(sessions: PomodoroSession[]): TimerStats {\n  const now = new Date();\n  const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());\n  const weekAgo = new Date(today.getTime() - 7 * 24 * 60 * 60 * 1000);\n\n  // Filter completed work sessions\n  const completedWorkSessions = sessions.filter(\n    (s) => s.type === 'work' && s.completed\n  );\n\n  // Today's minutes\n  const todaySessions = completedWorkSessions.filter((s) => {\n    const sessionDate = new Date(s.startTime);\n    return sessionDate >= today;\n  });\n  const todayMinutes = Math.round(\n    todaySessions.reduce((acc, s) => acc + s.duration, 0) / 60\n  );\n\n  // Week's minutes\n  const weekSessions = completedWorkSessions.filter((s) => {\n    const sessionDate = new Date(s.startTime);\n    return sessionDate >= weekAgo;\n  });\n  const weekMinutes = Math.round(\n    weekSessions.reduce((acc, s) => acc + s.duration, 0) / 60\n  );\n\n  // Calculate streak (consecutive days with at least one session)\n  const sessionDays = new Set<string>();\n  completedWorkSessions.forEach((s) => {\n    const date = new Date(s.startTime).toDateString();\n    sessionDays.add(date);\n  });\n\n  let currentStreak = 0;\n  let checkDate = new Date(today);\n  while (sessionDays.has(checkDate.toDateString())) {\n    currentStreak++;\n    checkDate.setDate(checkDate.getDate() - 1);\n  }\n\n  // Average session length\n  const avgSession =\n    completedWorkSessions.length > 0\n      ? Math.round(\n          completedWorkSessions.reduce((acc, s) => acc + s.duration, 0) /\n            completedWorkSessions.length /\n            60\n        )\n      : 0;\n\n  return {\n    todayMinutes,\n    weekMinutes,\n    totalSessions: completedWorkSessions.length,\n    currentStreak,\n    averageSessionLength: avgSession,\n  };\n}\n\n/**\n * Generate a unique session ID\n */\nexport function generateSessionId(): string {\n  return `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n}\n\n/**\n * Play notification sound\n */\nexport function playNotificationSound(): void {\n  try {\n    // Create a simple beep sound using Web Audio API\n    const audioContext = new (window.AudioContext ||\n      (window as unknown as { webkitAudioContext: typeof AudioContext })\n        .webkitAudioContext)();\n    const oscillator = audioContext.createOscillator();\n    const gainNode = audioContext.createGain();\n\n    oscillator.connect(gainNode);\n    gainNode.connect(audioContext.destination);\n\n    oscillator.frequency.value = 800;\n    oscillator.type = 'sine';\n    gainNode.gain.value = 0.3;\n\n    oscillator.start();\n    oscillator.stop(audioContext.currentTime + 0.2);\n  } catch (e) {\n    // Audio not supported or blocked\n    console.log('Audio notification not available');\n  }\n}\n\n/**\n * Request browser notification permission\n */\nexport async function requestNotificationPermission(): Promise<boolean> {\n  if (!('Notification' in window)) {\n    return false;\n  }\n\n  if (Notification.permission === 'granted') {\n    return true;\n  }\n\n  if (Notification.permission !== 'denied') {\n    const permission = await Notification.requestPermission();\n    return permission === 'granted';\n  }\n\n  return false;\n}\n\n/**\n * Show browser notification\n */\nexport function showNotification(title: string, body: string): void {\n  if (Notification.permission === 'granted') {\n    new Notification(title, {\n      body,\n      icon: '/favicon.ico',\n      badge: '/favicon.ico',\n    });\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}