{"ast":null,"code":"import { map, shareReplay } from \"rxjs\";\nimport { memoize } from \"./memoize.js\";\nfunction mapObservableFragment(observable, mapFn) {\n  let currentResult;\n  let stableMappedResult;\n  function toMapped(result) {\n    if (result !== currentResult) {\n      currentResult = result;\n      stableMappedResult = mapFn(currentResult);\n    }\n    return stableMappedResult;\n  }\n  return Object.assign(observable.pipe(map(toMapped), shareReplay({\n    bufferSize: 1,\n    refCount: true\n  })), {\n    getCurrentResult: () => toMapped(observable.getCurrentResult())\n  });\n}\nexport const mapObservableFragmentMemoized = memoize(function mapObservableFragmentMemoized(observable,\n/**\n * used together with `observable` as memoization key, `mapFn` is explicitly not used as memoization key\n */\n_cacheKey, mapFn) {\n  return mapObservableFragment(observable, mapFn);\n}, {\n  max: 1,\n  makeCacheKey: args => args.slice(0, 2)\n});","map":{"version":3,"names":["map","shareReplay","memoize","mapObservableFragment","observable","mapFn","currentResult","stableMappedResult","toMapped","result","Object","assign","pipe","bufferSize","refCount","getCurrentResult","mapObservableFragmentMemoized","_cacheKey","max","makeCacheKey","args","slice"],"sources":["/home/zobair-qauomi/todo_app/node_modules/@apollo/src/utilities/internal/mapObservableFragment.ts"],"sourcesContent":["import { map, shareReplay } from \"rxjs\";\n\nimport type { ApolloCache } from \"@apollo/client\";\n\nimport { memoize } from \"./memoize.js\";\n\nfunction mapObservableFragment<From, To>(\n  observable: ApolloCache.ObservableFragment<From>,\n  mapFn: (\n    from: ApolloCache.WatchFragmentResult<From>\n  ) => ApolloCache.WatchFragmentResult<To>\n): ApolloCache.ObservableFragment<To> {\n  let currentResult: ApolloCache.WatchFragmentResult<From>;\n  let stableMappedResult: ApolloCache.WatchFragmentResult<To>;\n\n  function toMapped(\n    result: ApolloCache.WatchFragmentResult<From>\n  ): ApolloCache.WatchFragmentResult<To> {\n    if (result !== currentResult) {\n      currentResult = result;\n      stableMappedResult = mapFn(currentResult);\n    }\n    return stableMappedResult;\n  }\n\n  return Object.assign(\n    observable.pipe(\n      map(toMapped),\n      shareReplay({ bufferSize: 1, refCount: true })\n    ),\n    {\n      getCurrentResult: () => toMapped(observable.getCurrentResult()),\n    }\n  );\n}\n\nexport const mapObservableFragmentMemoized = memoize(\n  function mapObservableFragmentMemoized<From, To>(\n    observable: ApolloCache.ObservableFragment<From>,\n    /**\n     * used together with `observable` as memoization key, `mapFn` is explicitly not used as memoization key\n     */\n    _cacheKey: symbol,\n    mapFn: (\n      from: ApolloCache.WatchFragmentResult<From>\n    ) => ApolloCache.WatchFragmentResult<To>\n  ): ApolloCache.ObservableFragment<To> {\n    return mapObservableFragment(observable, mapFn);\n  },\n  { max: 1, makeCacheKey: (args) => args.slice(0, 2) }\n);\n"],"mappings":"AAAA,SAASA,GAAG,EAAEC,WAAW,QAAQ,MAAM;AAIvC,SAASC,OAAO,QAAQ,cAAc;AAEtC,SAASC,qBAAqBA,CAC5BC,UAAgD,EAChDC,KAEwC;EAExC,IAAIC,aAAoD;EACxD,IAAIC,kBAAuD;EAE3D,SAASC,QAAQA,CACfC,MAA6C;IAE7C,IAAIA,MAAM,KAAKH,aAAa,EAAE;MAC5BA,aAAa,GAAGG,MAAM;MACtBF,kBAAkB,GAAGF,KAAK,CAACC,aAAa,CAAC;IAC3C;IACA,OAAOC,kBAAkB;EAC3B;EAEA,OAAOG,MAAM,CAACC,MAAM,CAClBP,UAAU,CAACQ,IAAI,CACbZ,GAAG,CAACQ,QAAQ,CAAC,EACbP,WAAW,CAAC;IAAEY,UAAU,EAAE,CAAC;IAAEC,QAAQ,EAAE;EAAI,CAAE,CAAC,CAC/C,EACD;IACEC,gBAAgB,EAAEA,CAAA,KAAMP,QAAQ,CAACJ,UAAU,CAACW,gBAAgB,EAAE;GAC/D,CACF;AACH;AAEA,OAAO,MAAMC,6BAA6B,GAAGd,OAAO,CAClD,SAASc,6BAA6BA,CACpCZ,UAAgD;AAChD;;;AAGAa,SAAiB,EACjBZ,KAEwC;EAExC,OAAOF,qBAAqB,CAACC,UAAU,EAAEC,KAAK,CAAC;AACjD,CAAC,EACD;EAAEa,GAAG,EAAE,CAAC;EAAEC,YAAY,EAAGC,IAAI,IAAKA,IAAI,CAACC,KAAK,CAAC,CAAC,EAAE,CAAC;AAAC,CAAE,CACrD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}