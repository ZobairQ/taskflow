{"ast":null,"code":"import _objectSpread from \"/home/zobair-qauomi/todo_app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport * as React from \"react\";\nimport { canonicalStringify } from \"@apollo/client/cache\";\nimport { getSuspenseCache } from \"@apollo/client/react/internal\";\nimport { __use } from \"./internal/__use.js\";\nimport { useDeepMemo, wrapHook } from \"./internal/index.js\";\nimport { useApolloClient } from \"./useApolloClient.js\";\nexport function useSuspenseFragment(options) {\n  \"use no memo\";\n\n  return wrapHook(\"useSuspenseFragment\", useSuspenseFragment_, useApolloClient(typeof options === \"object\" ? options.client : undefined))(options);\n}\nfunction useSuspenseFragment_(options) {\n  const client = useApolloClient(options.client);\n  const {\n    from,\n    variables\n  } = options;\n  const {\n    cache\n  } = client;\n  const ids = useDeepMemo(() => {\n    return Array.isArray(from) ? from.map(id => toStringId(cache, id)) : toStringId(cache, from);\n  }, [cache, from]);\n  const idString = React.useMemo(() => Array.isArray(ids) ? ids.join(\",\") : ids, [ids]);\n  const fragmentRef = getSuspenseCache(client).getFragmentRef([options.fragment, canonicalStringify(variables), idString], client, _objectSpread(_objectSpread({}, options), {}, {\n    variables: variables,\n    from: ids\n  }));\n  let [current, setPromise] = React.useState([fragmentRef.key, fragmentRef.promise]);\n  React.useEffect(() => {\n    const dispose = fragmentRef.retain();\n    const removeListener = fragmentRef.listen(promise => {\n      setPromise([fragmentRef.key, promise]);\n    });\n    return () => {\n      dispose();\n      removeListener();\n    };\n  }, [fragmentRef]);\n  if (current[0] !== fragmentRef.key) {\n    // eslint-disable-next-line react-hooks/immutability\n    current[0] = fragmentRef.key;\n    // eslint-disable-next-line react-hooks/immutability\n    current[1] = fragmentRef.promise;\n  }\n  const data = __use(current[1]);\n  return {\n    data\n  };\n}\nfunction toStringId(cache, from) {\n  return typeof from === \"string\" ? from : from === null ? null : cache.identify(from);\n}","map":{"version":3,"names":["React","canonicalStringify","getSuspenseCache","__use","useDeepMemo","wrapHook","useApolloClient","useSuspenseFragment","options","useSuspenseFragment_","client","undefined","from","variables","cache","ids","Array","isArray","map","id","toStringId","idString","useMemo","join","fragmentRef","getFragmentRef","fragment","_objectSpread","current","setPromise","useState","key","promise","useEffect","dispose","retain","removeListener","listen","data","identify"],"sources":["/home/zobair-qauomi/todo_app/node_modules/@apollo/src/react/hooks/useSuspenseFragment.ts"],"sourcesContent":["import * as React from \"react\";\n\nimport type {\n  ApolloClient,\n  DataValue,\n  DocumentNode,\n  OperationVariables,\n  TypedDocumentNode,\n} from \"@apollo/client\";\nimport type { ApolloCache } from \"@apollo/client/cache\";\nimport { canonicalStringify } from \"@apollo/client/cache\";\nimport type { MaybeMasked } from \"@apollo/client/masking\";\nimport type { FragmentKey } from \"@apollo/client/react/internal\";\nimport { getSuspenseCache } from \"@apollo/client/react/internal\";\nimport type {\n  DocumentationTypes as UtilityDocumentationTypes,\n  NoInfer,\n  VariablesOption,\n} from \"@apollo/client/utilities/internal\";\n\nimport { __use } from \"./internal/__use.js\";\nimport { useDeepMemo, wrapHook } from \"./internal/index.js\";\nimport { useApolloClient } from \"./useApolloClient.js\";\n\nexport declare namespace useSuspenseFragment {\n  import _self = useSuspenseFragment;\n  export namespace Base {\n    export type Options<TData, TVariables extends OperationVariables> = {\n      /**\n       * A GraphQL document created using the `gql` template string tag from\n       * `graphql-tag` with one or more fragments which will be used to determine\n       * the shape of data to read. If you provide more than one fragment in this\n       * document then you must also specify `fragmentName` to select a single.\n       */\n      fragment: DocumentNode | TypedDocumentNode<TData, TVariables>;\n\n      /**\n       * The name of the fragment in your GraphQL document to be used. If you do\n       * not provide a `fragmentName` and there is only one fragment in your\n       * `fragment` document then that fragment will be used.\n       */\n      fragmentName?: string;\n\n      /**\n       * An object or array containing a `__typename` and primary key fields\n       * (such as `id`) identifying the entity object from which the fragment will\n       * be retrieved, or a `{ __ref: \"...\" }` reference, or a `string` ID (uncommon).\n       */\n      from:\n        | useSuspenseFragment.FromOptionValue<TData>\n        | Array<useSuspenseFragment.FromOptionValue<TData> | null>\n        | null;\n\n      // Override this field to make it optional (default: true).\n      optimistic?: boolean;\n      /**\n       * The instance of `ApolloClient` to use to look up the fragment.\n       *\n       * By default, the instance that's passed down via context is used, but you\n       * can provide a different instance here.\n       *\n       * @docGroup 1. Operation options\n       */\n      client?: ApolloClient;\n    };\n  }\n  export type Options<\n    TData,\n    TVariables extends OperationVariables,\n  > = Base.Options<TData, TVariables> & VariablesOption<NoInfer<TVariables>>;\n\n  export namespace DocumentationTypes {\n    export namespace useSuspenseFragment {\n      export interface Options<\n        TData = unknown,\n        TVariables extends OperationVariables = OperationVariables,\n      > extends Base.Options<TData, TVariables>,\n          UtilityDocumentationTypes.VariableOptions<TVariables> {}\n    }\n  }\n\n  /**\n   * Acceptable values provided to the `from` option.\n   */\n  export type FromOptionValue<TData> = ApolloCache.FromOptionValue<TData>;\n\n  export interface Result<TData> {\n    data: DataValue.Complete<MaybeMasked<TData>>;\n  }\n  export namespace DocumentationTypes {\n    export namespace useSuspenseFragment {\n      export interface Result<TData = unknown> extends _self.Result<TData> {}\n    }\n  }\n\n  export namespace DocumentationTypes {\n    /** {@inheritDoc @apollo/client/react!useSuspenseFragment:function(1)} */\n    export function useSuspenseFragment<\n      TData,\n      TVariables extends OperationVariables = OperationVariables,\n    >(\n      options: useSuspenseFragment.Options<TData, TVariables>\n    ): useSuspenseFragment.Result<TData>;\n  }\n}\n\n/** #TODO documentation */\nexport function useSuspenseFragment<\n  TData = unknown,\n  TVariables extends OperationVariables = OperationVariables,\n>(\n  options: useSuspenseFragment.Options<TData, TVariables> & {\n    from: Array<useSuspenseFragment.FromOptionValue<TData>>;\n  }\n): useSuspenseFragment.Result<Array<TData>>;\n\n/** {@inheritDoc @apollo/client/react!useSuspenseFragment:function(1)} */\nexport function useSuspenseFragment<\n  TData = unknown,\n  TVariables extends OperationVariables = OperationVariables,\n>(\n  options: useSuspenseFragment.Options<TData, TVariables> & {\n    from: Array<null>;\n  }\n): useSuspenseFragment.Result<Array<null>>;\n\n/** {@inheritDoc @apollo/client/react!useSuspenseFragment:function(1)} */\nexport function useSuspenseFragment<\n  TData = unknown,\n  TVariables extends OperationVariables = OperationVariables,\n>(\n  options: useSuspenseFragment.Options<TData, TVariables> & {\n    from: Array<useSuspenseFragment.FromOptionValue<TData> | null>;\n  }\n): useSuspenseFragment.Result<Array<TData | null>>;\n\n/** {@inheritDoc @apollo/client/react!useSuspenseFragment:function(1)} */\nexport function useSuspenseFragment<\n  TData,\n  TVariables extends OperationVariables = OperationVariables,\n>(\n  options: useSuspenseFragment.Options<TData, TVariables> & {\n    from: useSuspenseFragment.FromOptionValue<TData>;\n  }\n): useSuspenseFragment.Result<TData>;\n\n/** {@inheritDoc @apollo/client/react!useSuspenseFragment:function(1)} */\nexport function useSuspenseFragment<\n  TData,\n  TVariables extends OperationVariables = OperationVariables,\n>(\n  options: useSuspenseFragment.Options<TData, TVariables> & {\n    from: null;\n  }\n): useSuspenseFragment.Result<null>;\n\n/** {@inheritDoc @apollo/client/react!useSuspenseFragment:function(1)} */\nexport function useSuspenseFragment<\n  TData,\n  TVariables extends OperationVariables = OperationVariables,\n>(\n  options: useSuspenseFragment.Options<TData, TVariables> & {\n    from: useSuspenseFragment.FromOptionValue<TData> | null;\n  }\n): useSuspenseFragment.Result<TData | null>;\n\n/** {@inheritDoc @apollo/client/react!useSuspenseFragment:function(1)} */\nexport function useSuspenseFragment<\n  TData,\n  TVariables extends OperationVariables = OperationVariables,\n>(\n  options: useSuspenseFragment.Options<TData, TVariables>\n): useSuspenseFragment.Result<TData>;\n\nexport function useSuspenseFragment<\n  TData = unknown,\n  TVariables extends OperationVariables = OperationVariables,\n>(\n  options: useSuspenseFragment.Options<TData, TVariables>\n): useSuspenseFragment.Result<TData | null> {\n  \"use no memo\";\n  return wrapHook(\n    \"useSuspenseFragment\",\n    useSuspenseFragment_,\n    useApolloClient(typeof options === \"object\" ? options.client : undefined)\n  )(options);\n}\n\nfunction useSuspenseFragment_<\n  TData = unknown,\n  TVariables extends OperationVariables = OperationVariables,\n>(\n  options: useSuspenseFragment.Options<TData, TVariables>\n): useSuspenseFragment.Result<TData | null> {\n  const client = useApolloClient(options.client);\n  const { from, variables } = options;\n  const { cache } = client;\n\n  const ids = useDeepMemo(() => {\n    return Array.isArray(from) ?\n        from.map((id) => toStringId(cache, id))\n      : toStringId(cache, from);\n  }, [cache, from]);\n  const idString = React.useMemo(\n    () => (Array.isArray(ids) ? ids.join(\",\") : ids),\n    [ids]\n  );\n\n  const fragmentRef = getSuspenseCache(client).getFragmentRef(\n    [options.fragment, canonicalStringify(variables), idString],\n    client,\n    { ...options, variables: variables as TVariables, from: ids }\n  );\n\n  let [current, setPromise] = React.useState<\n    [FragmentKey, Promise<MaybeMasked<TData> | null>]\n  >([fragmentRef.key, fragmentRef.promise]);\n\n  React.useEffect(() => {\n    const dispose = fragmentRef.retain();\n    const removeListener = fragmentRef.listen((promise) => {\n      setPromise([fragmentRef.key, promise]);\n    });\n\n    return () => {\n      dispose();\n      removeListener();\n    };\n  }, [fragmentRef]);\n\n  if (current[0] !== fragmentRef.key) {\n    // eslint-disable-next-line react-hooks/immutability\n    current[0] = fragmentRef.key;\n    // eslint-disable-next-line react-hooks/immutability\n    current[1] = fragmentRef.promise;\n  }\n\n  const data = __use(current[1]);\n\n  return { data };\n}\n\nfunction toStringId(\n  cache: ApolloCache,\n  from: useSuspenseFragment.FromOptionValue<any> | null\n) {\n  return (\n    typeof from === \"string\" ? from\n    : from === null ? null\n    : cache.identify(from)) as string | null;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}