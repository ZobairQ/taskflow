{"ast":null,"code":"/**\n * useAnalytics - Hook for computing and managing analytics data\n */import{useState,useMemo,useCallback}from'react';import{getDateRange,calculateProductivityMetrics,calculateTimeTrackingMetrics,calculateCategoryMetrics,calculatePriorityMetrics,generateInsights}from'../utils/analytics/calculations';export function useAnalytics(options){const{tasks,focusSessions=[],initialRange='week'}=options;const[dateRange,setDateRange]=useState(initialRange);const[customStart,setCustomStart]=useState(null);const[customEnd,setCustomEnd]=useState(null);const[isLoading,setIsLoading]=useState(false);const setCustomRange=useCallback((start,end)=>{setCustomStart(start);setCustomEnd(end);setDateRange('custom');},[]);const refresh=useCallback(()=>{setIsLoading(true);// Simulate async refresh - in real app, might fetch from API\nsetTimeout(()=>setIsLoading(false),100);},[]);// Calculate all metrics when dependencies change\nconst metrics=useMemo(()=>{const productivity=calculateProductivityMetrics(tasks,dateRange,customStart||undefined,customEnd||undefined);const timeTracking=calculateTimeTrackingMetrics(focusSessions,dateRange,customStart||undefined,customEnd||undefined);const range=getDateRange(dateRange,customStart||undefined,customEnd||undefined);const filteredTasks=tasks.filter(t=>t.createdAt>=range.start.getTime()&&t.createdAt<=range.end.getTime());const categories=calculateCategoryMetrics(filteredTasks);const priorities=calculatePriorityMetrics(filteredTasks);const insights=generateInsights(productivity,categories,timeTracking);return{productivity,timeTracking,categories,priorities,insights,dailyMetrics:productivity.dailyBreakdown};},[tasks,focusSessions,dateRange,customStart,customEnd]);return{dateRange,setDateRange,customStart,customEnd,setCustomRange,productivity:metrics.productivity,timeTracking:metrics.timeTracking,categories:metrics.categories,priorities:metrics.priorities,insights:metrics.insights,dailyMetrics:metrics.dailyMetrics,isLoading,refresh};}// Hook to get focus sessions from localStorage (Pomodoro data)\nexport function useFocusSessions(){return useMemo(()=>{try{const stored=localStorage.getItem('pomodoroSessions');if(stored){return JSON.parse(stored);}}catch(_unused){// ignore\n}return[];},[]);}","map":{"version":3,"names":["useState","useMemo","useCallback","getDateRange","calculateProductivityMetrics","calculateTimeTrackingMetrics","calculateCategoryMetrics","calculatePriorityMetrics","generateInsights","useAnalytics","options","tasks","focusSessions","initialRange","dateRange","setDateRange","customStart","setCustomStart","customEnd","setCustomEnd","isLoading","setIsLoading","setCustomRange","start","end","refresh","setTimeout","metrics","productivity","undefined","timeTracking","range","filteredTasks","filter","t","createdAt","getTime","categories","priorities","insights","dailyMetrics","dailyBreakdown","useFocusSessions","stored","localStorage","getItem","JSON","parse","_unused"],"sources":["/home/zobair-qauomi/todo_app/frontend/src/hooks/useAnalytics.ts"],"sourcesContent":["/**\n * useAnalytics - Hook for computing and managing analytics data\n */\n\nimport { useState, useMemo, useCallback } from 'react';\nimport { Task } from '../types/task.types';\nimport {\n  DateRange,\n  ProductivityMetrics,\n  TimeTrackingMetrics,\n  CategoryMetrics,\n  PriorityMetrics,\n  DailyMetrics,\n} from '../types/analytics.types';\nimport {\n  getDateRange,\n  calculateProductivityMetrics,\n  calculateTimeTrackingMetrics,\n  calculateCategoryMetrics,\n  calculatePriorityMetrics,\n  generateInsights,\n} from '../utils/analytics/calculations';\n\ninterface FocusSession {\n  date: number;\n  duration: number;\n  category?: string;\n}\n\ninterface UseAnalyticsOptions {\n  tasks: Task[];\n  focusSessions?: FocusSession[];\n  initialRange?: DateRange;\n}\n\ninterface UseAnalyticsReturn {\n  dateRange: DateRange;\n  setDateRange: (range: DateRange) => void;\n  customStart: Date | null;\n  customEnd: Date | null;\n  setCustomRange: (start: Date, end: Date) => void;\n  productivity: ProductivityMetrics;\n  timeTracking: TimeTrackingMetrics;\n  categories: CategoryMetrics[];\n  priorities: PriorityMetrics[];\n  insights: string[];\n  dailyMetrics: DailyMetrics[];\n  isLoading: boolean;\n  refresh: () => void;\n}\n\nexport function useAnalytics(options: UseAnalyticsOptions): UseAnalyticsReturn {\n  const { tasks, focusSessions = [], initialRange = 'week' } = options;\n\n  const [dateRange, setDateRange] = useState<DateRange>(initialRange);\n  const [customStart, setCustomStart] = useState<Date | null>(null);\n  const [customEnd, setCustomEnd] = useState<Date | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const setCustomRange = useCallback((start: Date, end: Date) => {\n    setCustomStart(start);\n    setCustomEnd(end);\n    setDateRange('custom');\n  }, []);\n\n  const refresh = useCallback(() => {\n    setIsLoading(true);\n    // Simulate async refresh - in real app, might fetch from API\n    setTimeout(() => setIsLoading(false), 100);\n  }, []);\n\n  // Calculate all metrics when dependencies change\n  const metrics = useMemo(() => {\n    const productivity = calculateProductivityMetrics(\n      tasks,\n      dateRange,\n      customStart || undefined,\n      customEnd || undefined\n    );\n\n    const timeTracking = calculateTimeTrackingMetrics(\n      focusSessions,\n      dateRange,\n      customStart || undefined,\n      customEnd || undefined\n    );\n\n    const range = getDateRange(dateRange, customStart || undefined, customEnd || undefined);\n    const filteredTasks = tasks.filter(\n      t => t.createdAt >= range.start.getTime() && t.createdAt <= range.end.getTime()\n    );\n\n    const categories = calculateCategoryMetrics(filteredTasks);\n    const priorities = calculatePriorityMetrics(filteredTasks);\n    const insights = generateInsights(productivity, categories, timeTracking);\n\n    return {\n      productivity,\n      timeTracking,\n      categories,\n      priorities,\n      insights,\n      dailyMetrics: productivity.dailyBreakdown,\n    };\n  }, [tasks, focusSessions, dateRange, customStart, customEnd]);\n\n  return {\n    dateRange,\n    setDateRange,\n    customStart,\n    customEnd,\n    setCustomRange,\n    productivity: metrics.productivity,\n    timeTracking: metrics.timeTracking,\n    categories: metrics.categories,\n    priorities: metrics.priorities,\n    insights: metrics.insights,\n    dailyMetrics: metrics.dailyMetrics,\n    isLoading,\n    refresh,\n  };\n}\n\n// Hook to get focus sessions from localStorage (Pomodoro data)\nexport function useFocusSessions(): FocusSession[] {\n  return useMemo(() => {\n    try {\n      const stored = localStorage.getItem('pomodoroSessions');\n      if (stored) {\n        return JSON.parse(stored);\n      }\n    } catch {\n      // ignore\n    }\n    return [];\n  }, []);\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}