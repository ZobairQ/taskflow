{"ast":null,"code":"import _objectSpread from\"/home/zobair-qauomi/todo_app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";/**\n * TemplateContext - State management for task templates with Apollo integration\n */import React,{createContext,useContext,useState,useEffect,useCallback,useMemo}from'react';import{useQuery,useMutation}from'@apollo/client/react';import{BUILT_IN_TEMPLATES,CATEGORY_CONFIG}from'../constants/templates';import{createTemplateFromTask,filterTemplates,sortTemplatesByUsage}from'../utils/templateUtils';import{GET_TEMPLATES,GET_MOST_USED_TEMPLATES}from'../graphql/queries';import{CREATE_TEMPLATE,UPDATE_TEMPLATE,DELETE_TEMPLATE,USE_TEMPLATE}from'../graphql/mutations';import{isAuthenticated}from'../lib/apollo';// Storage key for custom templates (fallback when not authenticated)\nimport{jsx as _jsx}from\"react/jsx-runtime\";const STORAGE_KEY='taskflow_custom_templates';const USAGE_KEY='taskflow_template_usage';const TemplateContext=/*#__PURE__*/createContext(undefined);// Type for GraphQL query results\nexport function TemplateProvider(_ref){let{children}=_ref;// Local state for custom templates (fallback when not authenticated)\nconst[localCustomTemplates,setLocalCustomTemplates]=useState([]);const[usageStats,setUsageStats]=useState({});// Apollo queries (only when authenticated)\nconst{data:templatesData,refetch:refetchTemplates}=useQuery(GET_TEMPLATES,{skip:!isAuthenticated(),fetchPolicy:'cache-and-network'});const{data:mostUsedData}=useQuery(GET_MOST_USED_TEMPLATES,{skip:!isAuthenticated(),variables:{limit:10}});// Apollo mutations\nconst[createTemplateMutation]=useMutation(CREATE_TEMPLATE,{refetchQueries:[{query:GET_TEMPLATES},{query:GET_MOST_USED_TEMPLATES}]});const[updateTemplateMutation]=useMutation(UPDATE_TEMPLATE,{refetchQueries:[{query:GET_TEMPLATES}]});const[deleteTemplateMutation]=useMutation(DELETE_TEMPLATE,{refetchQueries:[{query:GET_TEMPLATES},{query:GET_MOST_USED_TEMPLATES}]});const[useTemplateMutation]=useMutation(USE_TEMPLATE,{refetchQueries:[{query:GET_TEMPLATES},{query:GET_MOST_USED_TEMPLATES}]});// Load local templates from localStorage (fallback)\nuseEffect(()=>{try{const stored=localStorage.getItem(STORAGE_KEY);if(stored){setLocalCustomTemplates(JSON.parse(stored));}}catch(e){console.error('Failed to load templates:',e);}try{const usageStored=localStorage.getItem(USAGE_KEY);if(usageStored){setUsageStats(JSON.parse(usageStored));}}catch(e){console.error('Failed to load usage stats:',e);}},[]);// Save local templates to localStorage\nuseEffect(()=>{if(!isAuthenticated()){localStorage.setItem(STORAGE_KEY,JSON.stringify(localCustomTemplates));}},[localCustomTemplates]);// Save usage stats to localStorage\nuseEffect(()=>{localStorage.setItem(USAGE_KEY,JSON.stringify(usageStats));},[usageStats]);// Transform Apollo template data to local format\nconst serverTemplates=useMemo(()=>{if(!(templatesData!==null&&templatesData!==void 0&&templatesData.templates))return[];return templatesData.templates.map(t=>({id:t.id,name:t.name,description:t.description||'',category:t.category,icon:t.icon||'⭐',isBuiltIn:t.isBuiltIn,createdAt:new Date(t.createdAt).getTime(),usageCount:t.usageCount||0,// Required template field\ntemplate:{text:t.name,description:t.description,priority:'medium',category:t.category,subtasks:[]}}));},[templatesData]);// Determine which custom templates to use\nconst customTemplates=useMemo(()=>{if(isAuthenticated()&&serverTemplates.length>0){// Use server templates, filtering out built-in ones\nreturn serverTemplates.filter(t=>!t.isBuiltIn);}// Fallback to local templates\nreturn localCustomTemplates;},[serverTemplates,localCustomTemplates]);// Combine built-in and custom templates\nconst templates=useMemo(()=>{// When authenticated, server provides all templates\nif(isAuthenticated()&&serverTemplates.length>0){return serverTemplates.map(t=>_objectSpread(_objectSpread({},t),{},{usageCount:usageStats[t.id]||t.usageCount||0}));}// Otherwise, combine built-in with local custom\nconst all=[...BUILT_IN_TEMPLATES,...localCustomTemplates];return all.map(t=>_objectSpread(_objectSpread({},t),{},{usageCount:usageStats[t.id]||t.usageCount||0}));},[serverTemplates,localCustomTemplates,usageStats]);// Get categories with template counts\nconst categories=useMemo(()=>{const counts={work:0,personal:0,health:0,finance:0,learning:0,custom:0};templates.forEach(t=>{counts[t.category]++;});return Object.entries(counts).filter(_ref2=>{let[_,count]=_ref2;return count>0;}).map(_ref3=>{let[category,count]=_ref3;return{category:category,count};});},[templates]);// Add a new custom template\nconst addTemplate=useCallback(async templateData=>{const newTemplate=_objectSpread(_objectSpread({},templateData),{},{id:\"custom-\".concat(Date.now(),\"-\").concat(Math.random().toString(36).substr(2,9)),isBuiltIn:false,createdAt:Date.now(),usageCount:0});if(isAuthenticated()){try{var _templateData$templat,_templateData$templat2,_templateData$templat3,_templateData$templat4,_result$data;const result=await createTemplateMutation({variables:{input:{name:templateData.name,description:templateData.description,category:templateData.category,icon:templateData.icon,defaultPriority:((_templateData$templat=templateData.template)===null||_templateData$templat===void 0?void 0:_templateData$templat.priority)||'medium',defaultCategory:((_templateData$templat2=templateData.template)===null||_templateData$templat2===void 0?void 0:_templateData$templat2.category)||templateData.category,subtaskTemplates:(_templateData$templat3=templateData.template)===null||_templateData$templat3===void 0?void 0:(_templateData$templat4=_templateData$templat3.subtasks)===null||_templateData$templat4===void 0?void 0:_templateData$templat4.map(s=>({text:s.text}))}}});if((_result$data=result.data)!==null&&_result$data!==void 0&&_result$data.createTemplate){return _objectSpread(_objectSpread({},newTemplate),{},{id:result.data.createTemplate.id,createdAt:new Date(result.data.createTemplate.createdAt).getTime()});}}catch(error){console.error('Failed to create template on server:',error);}}// Fallback to local storage\nsetLocalCustomTemplates(prev=>[...prev,newTemplate]);return newTemplate;},[createTemplateMutation]);// Create template from an existing task\nconst createFromTask=useCallback(async function(task,name,description){let category=arguments.length>3&&arguments[3]!==undefined?arguments[3]:'custom';let icon=arguments.length>4&&arguments[4]!==undefined?arguments[4]:'⭐';const newTemplate=createTemplateFromTask(task,name,description,category,icon);if(isAuthenticated()){try{var _newTemplate$template,_newTemplate$template2,_newTemplate$template3,_newTemplate$template4,_result$data2;const result=await createTemplateMutation({variables:{input:{name:newTemplate.name,description:newTemplate.description,category:newTemplate.category,icon:newTemplate.icon,defaultPriority:((_newTemplate$template=newTemplate.template)===null||_newTemplate$template===void 0?void 0:_newTemplate$template.priority)||'medium',defaultCategory:((_newTemplate$template2=newTemplate.template)===null||_newTemplate$template2===void 0?void 0:_newTemplate$template2.category)||newTemplate.category,subtaskTemplates:(_newTemplate$template3=newTemplate.template)===null||_newTemplate$template3===void 0?void 0:(_newTemplate$template4=_newTemplate$template3.subtasks)===null||_newTemplate$template4===void 0?void 0:_newTemplate$template4.map(s=>({text:s.text}))}}});if((_result$data2=result.data)!==null&&_result$data2!==void 0&&_result$data2.createTemplate){return _objectSpread(_objectSpread({},newTemplate),{},{id:result.data.createTemplate.id,createdAt:new Date(result.data.createTemplate.createdAt).getTime()});}}catch(error){console.error('Failed to create template on server:',error);}}// Fallback to local storage\nsetLocalCustomTemplates(prev=>[...prev,newTemplate]);return newTemplate;},[createTemplateMutation]);// Update a custom template\nconst updateTemplate=useCallback(async(id,updates)=>{if(isAuthenticated()&&!id.startsWith('custom-')){try{var _updates$template,_updates$template2,_updates$template3,_updates$template3$su;await updateTemplateMutation({variables:{id,input:{name:updates.name,description:updates.description,category:updates.category,icon:updates.icon,defaultPriority:(_updates$template=updates.template)===null||_updates$template===void 0?void 0:_updates$template.priority,defaultCategory:(_updates$template2=updates.template)===null||_updates$template2===void 0?void 0:_updates$template2.category,subtaskTemplates:(_updates$template3=updates.template)===null||_updates$template3===void 0?void 0:(_updates$template3$su=_updates$template3.subtasks)===null||_updates$template3$su===void 0?void 0:_updates$template3$su.map(s=>({text:s.text}))}}});return;}catch(error){console.error('Failed to update template on server:',error);}}// Fallback to local\nsetLocalCustomTemplates(prev=>prev.map(t=>t.id===id?_objectSpread(_objectSpread({},t),updates):t));},[updateTemplateMutation]);// Delete a custom template\nconst deleteTemplate=useCallback(async id=>{// Don't allow deleting built-in templates\nif(id.startsWith('builtin-'))return;if(isAuthenticated()&&!id.startsWith('custom-')){try{await deleteTemplateMutation({variables:{id}});return;}catch(error){console.error('Failed to delete template on server:',error);}}// Fallback to local\nsetLocalCustomTemplates(prev=>prev.filter(t=>t.id!==id));},[deleteTemplateMutation]);// Increment usage count for a template\nconst incrementUsage=useCallback(async id=>{// Update local usage stats\nsetUsageStats(prev=>_objectSpread(_objectSpread({},prev),{},{[id]:(prev[id]||0)+1}));// Note: Usage is tracked on the server when USE_TEMPLATE mutation is called\n},[]);// Get a single template by ID\nconst getTemplate=useCallback(id=>{return templates.find(t=>t.id===id);},[templates]);// Filter templates by category\nconst filterByCategory=useCallback(category=>{if(!category)return templates;return filterTemplates(templates,{category});},[templates]);// Search templates\nconst searchTemplates=useCallback(query=>{return filterTemplates(templates,{searchQuery:query});},[templates]);// Get most used templates\nconst getMostUsed=useCallback(function(){let limit=arguments.length>0&&arguments[0]!==undefined?arguments[0]:5;// Use server data if available\nif(isAuthenticated()&&mostUsedData!==null&&mostUsedData!==void 0&&mostUsedData.mostUsedTemplates){return mostUsedData.mostUsedTemplates.slice(0,limit).map(t=>({id:t.id,name:t.name,description:t.description||'',category:t.category,icon:t.icon||'⭐',isBuiltIn:t.isBuiltIn||false,createdAt:0,usageCount:t.usageCount||0,defaultPriority:'medium',defaultCategory:t.category,subtaskTemplates:[]}));}return sortTemplatesByUsage(templates).slice(0,limit);},[templates,mostUsedData]);const value={templates,customTemplates,builtInTemplates:BUILT_IN_TEMPLATES,categories,addTemplate,createFromTask,updateTemplate,deleteTemplate,incrementUsage,getTemplate,filterByCategory,searchTemplates,getMostUsed};return/*#__PURE__*/_jsx(TemplateContext.Provider,{value:value,children:children});}export function useTemplates(){const context=useContext(TemplateContext);if(!context){throw new Error('useTemplates must be used within a TemplateProvider');}return context;}// Export category config for use in components\nexport{CATEGORY_CONFIG};","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","useCallback","useMemo","useQuery","useMutation","BUILT_IN_TEMPLATES","CATEGORY_CONFIG","createTemplateFromTask","filterTemplates","sortTemplatesByUsage","GET_TEMPLATES","GET_MOST_USED_TEMPLATES","CREATE_TEMPLATE","UPDATE_TEMPLATE","DELETE_TEMPLATE","USE_TEMPLATE","isAuthenticated","jsx","_jsx","STORAGE_KEY","USAGE_KEY","TemplateContext","undefined","TemplateProvider","_ref","children","localCustomTemplates","setLocalCustomTemplates","usageStats","setUsageStats","data","templatesData","refetch","refetchTemplates","skip","fetchPolicy","mostUsedData","variables","limit","createTemplateMutation","refetchQueries","query","updateTemplateMutation","deleteTemplateMutation","useTemplateMutation","stored","localStorage","getItem","JSON","parse","e","console","error","usageStored","setItem","stringify","serverTemplates","templates","map","t","id","name","description","category","icon","isBuiltIn","createdAt","Date","getTime","usageCount","template","text","priority","subtasks","customTemplates","length","filter","_objectSpread","all","categories","counts","work","personal","health","finance","learning","custom","forEach","Object","entries","_ref2","_","count","_ref3","addTemplate","templateData","newTemplate","concat","now","Math","random","toString","substr","_templateData$templat","_templateData$templat2","_templateData$templat3","_templateData$templat4","_result$data","result","input","defaultPriority","defaultCategory","subtaskTemplates","s","createTemplate","prev","createFromTask","task","arguments","_newTemplate$template","_newTemplate$template2","_newTemplate$template3","_newTemplate$template4","_result$data2","updateTemplate","updates","startsWith","_updates$template","_updates$template2","_updates$template3","_updates$template3$su","deleteTemplate","incrementUsage","getTemplate","find","filterByCategory","searchTemplates","searchQuery","getMostUsed","mostUsedTemplates","slice","value","builtInTemplates","Provider","useTemplates","context","Error"],"sources":["/home/zobair-qauomi/todo_app/frontend/src/contexts/TemplateContext.tsx"],"sourcesContent":["/**\n * TemplateContext - State management for task templates with Apollo integration\n */\n\nimport React, { createContext, useContext, useState, useEffect, useCallback, useMemo } from 'react';\nimport { useQuery, useMutation } from '@apollo/client/react';\nimport { TaskTemplate, TemplateCategory } from '../types/template.types';\nimport { Task } from '../types/task.types';\nimport { BUILT_IN_TEMPLATES, CATEGORY_CONFIG } from '../constants/templates';\nimport {\n  createTemplateFromTask,\n  filterTemplates,\n  sortTemplatesByUsage,\n} from '../utils/templateUtils';\nimport { GET_TEMPLATES, GET_MOST_USED_TEMPLATES } from '../graphql/queries';\nimport { CREATE_TEMPLATE, UPDATE_TEMPLATE, DELETE_TEMPLATE, USE_TEMPLATE } from '../graphql/mutations';\nimport { isAuthenticated } from '../lib/apollo';\n\n// Storage key for custom templates (fallback when not authenticated)\nconst STORAGE_KEY = 'taskflow_custom_templates';\nconst USAGE_KEY = 'taskflow_template_usage';\n\ninterface TemplateContextType {\n  // All templates (built-in + custom)\n  templates: TaskTemplate[];\n  // Custom templates only\n  customTemplates: TaskTemplate[];\n  // Built-in templates only\n  builtInTemplates: TaskTemplate[];\n  // Categories with templates\n  categories: { category: TemplateCategory; count: number }[];\n\n  // Actions\n  addTemplate: (template: Omit<TaskTemplate, 'id' | 'createdAt' | 'usageCount' | 'isBuiltIn'>) => TaskTemplate;\n  createFromTask: (task: Task, name: string, description: string, category?: TemplateCategory, icon?: string) => TaskTemplate;\n  updateTemplate: (id: string, updates: Partial<TaskTemplate>) => void;\n  deleteTemplate: (id: string) => void;\n  incrementUsage: (id: string) => void;\n  getTemplate: (id: string) => TaskTemplate | undefined;\n\n  // Filtering\n  filterByCategory: (category?: TemplateCategory) => TaskTemplate[];\n  searchTemplates: (query: string) => TaskTemplate[];\n  getMostUsed: (limit?: number) => TaskTemplate[];\n}\n\nconst TemplateContext = createContext<TemplateContextType | undefined>(undefined);\n\n// Type for GraphQL query results\ninterface TemplatesQueryResult {\n  templates: Array<{\n    id: string;\n    name: string;\n    description?: string;\n    category: string;\n    icon?: string;\n    isBuiltIn: boolean;\n    createdAt: string;\n    usageCount: number;\n  }>;\n}\n\ninterface MostUsedTemplatesQueryResult {\n  mostUsedTemplates: Array<{\n    id: string;\n    name: string;\n    description?: string;\n    category: string;\n    icon?: string;\n    isBuiltIn?: boolean;\n    usageCount: number;\n  }>;\n}\n\nexport function TemplateProvider({ children }: { children: React.ReactNode }) {\n  // Local state for custom templates (fallback when not authenticated)\n  const [localCustomTemplates, setLocalCustomTemplates] = useState<TaskTemplate[]>([]);\n  const [usageStats, setUsageStats] = useState<Record<string, number>>({});\n\n  // Apollo queries (only when authenticated)\n  const { data: templatesData, refetch: refetchTemplates } = useQuery<TemplatesQueryResult>(GET_TEMPLATES, {\n    skip: !isAuthenticated(),\n    fetchPolicy: 'cache-and-network',\n  });\n\n  const { data: mostUsedData } = useQuery<MostUsedTemplatesQueryResult>(GET_MOST_USED_TEMPLATES, {\n    skip: !isAuthenticated(),\n    variables: { limit: 10 },\n  });\n\n  // Apollo mutations\n  const [createTemplateMutation] = useMutation(CREATE_TEMPLATE, {\n    refetchQueries: [{ query: GET_TEMPLATES }, { query: GET_MOST_USED_TEMPLATES }],\n  });\n\n  const [updateTemplateMutation] = useMutation(UPDATE_TEMPLATE, {\n    refetchQueries: [{ query: GET_TEMPLATES }],\n  });\n\n  const [deleteTemplateMutation] = useMutation(DELETE_TEMPLATE, {\n    refetchQueries: [{ query: GET_TEMPLATES }, { query: GET_MOST_USED_TEMPLATES }],\n  });\n\n  const [useTemplateMutation] = useMutation(USE_TEMPLATE, {\n    refetchQueries: [{ query: GET_TEMPLATES }, { query: GET_MOST_USED_TEMPLATES }],\n  });\n\n  // Load local templates from localStorage (fallback)\n  useEffect(() => {\n    try {\n      const stored = localStorage.getItem(STORAGE_KEY);\n      if (stored) {\n        setLocalCustomTemplates(JSON.parse(stored));\n      }\n    } catch (e) {\n      console.error('Failed to load templates:', e);\n    }\n\n    try {\n      const usageStored = localStorage.getItem(USAGE_KEY);\n      if (usageStored) {\n        setUsageStats(JSON.parse(usageStored));\n      }\n    } catch (e) {\n      console.error('Failed to load usage stats:', e);\n    }\n  }, []);\n\n  // Save local templates to localStorage\n  useEffect(() => {\n    if (!isAuthenticated()) {\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(localCustomTemplates));\n    }\n  }, [localCustomTemplates]);\n\n  // Save usage stats to localStorage\n  useEffect(() => {\n    localStorage.setItem(USAGE_KEY, JSON.stringify(usageStats));\n  }, [usageStats]);\n\n  // Transform Apollo template data to local format\n  const serverTemplates: TaskTemplate[] = useMemo(() => {\n    if (!templatesData?.templates) return [];\n\n    return templatesData.templates.map((t) => ({\n      id: t.id,\n      name: t.name,\n      description: t.description || '',\n      category: t.category as TemplateCategory,\n      icon: t.icon || '⭐',\n      isBuiltIn: t.isBuiltIn,\n      createdAt: new Date(t.createdAt).getTime(),\n      usageCount: t.usageCount || 0,\n      // Required template field\n      template: {\n        text: t.name,\n        description: t.description,\n        priority: 'medium' as const,\n        category: t.category,\n        subtasks: [],\n      },\n    }));\n  }, [templatesData]);\n\n  // Determine which custom templates to use\n  const customTemplates = useMemo(() => {\n    if (isAuthenticated() && serverTemplates.length > 0) {\n      // Use server templates, filtering out built-in ones\n      return serverTemplates.filter(t => !t.isBuiltIn);\n    }\n    // Fallback to local templates\n    return localCustomTemplates;\n  }, [serverTemplates, localCustomTemplates]);\n\n  // Combine built-in and custom templates\n  const templates = useMemo(() => {\n    // When authenticated, server provides all templates\n    if (isAuthenticated() && serverTemplates.length > 0) {\n      return serverTemplates.map(t => ({\n        ...t,\n        usageCount: usageStats[t.id] || t.usageCount || 0,\n      }));\n    }\n\n    // Otherwise, combine built-in with local custom\n    const all = [...BUILT_IN_TEMPLATES, ...localCustomTemplates];\n    return all.map(t => ({\n      ...t,\n      usageCount: usageStats[t.id] || t.usageCount || 0,\n    }));\n  }, [serverTemplates, localCustomTemplates, usageStats]);\n\n  // Get categories with template counts\n  const categories = useMemo(() => {\n    const counts: Record<TemplateCategory, number> = {\n      work: 0,\n      personal: 0,\n      health: 0,\n      finance: 0,\n      learning: 0,\n      custom: 0,\n    };\n\n    templates.forEach(t => {\n      counts[t.category]++;\n    });\n\n    return Object.entries(counts)\n      .filter(([_, count]) => count > 0)\n      .map(([category, count]) => ({\n        category: category as TemplateCategory,\n        count,\n      }));\n  }, [templates]);\n\n  // Add a new custom template\n  const addTemplate = useCallback(async (\n    templateData: Omit<TaskTemplate, 'id' | 'createdAt' | 'usageCount' | 'isBuiltIn'>\n  ): Promise<TaskTemplate> => {\n    const newTemplate: TaskTemplate = {\n      ...templateData,\n      id: `custom-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n      isBuiltIn: false,\n      createdAt: Date.now(),\n      usageCount: 0,\n    };\n\n    if (isAuthenticated()) {\n      try {\n        const result = await createTemplateMutation({\n          variables: {\n            input: {\n              name: templateData.name,\n              description: templateData.description,\n              category: templateData.category,\n              icon: templateData.icon,\n              defaultPriority: templateData.template?.priority || 'medium',\n              defaultCategory: templateData.template?.category || templateData.category,\n              subtaskTemplates: templateData.template?.subtasks?.map(s => ({\n                text: s.text,\n              })),\n            },\n          },\n        });\n        if (result.data?.createTemplate) {\n          return {\n            ...newTemplate,\n            id: result.data.createTemplate.id,\n            createdAt: new Date(result.data.createTemplate.createdAt).getTime(),\n          };\n        }\n      } catch (error) {\n        console.error('Failed to create template on server:', error);\n      }\n    }\n\n    // Fallback to local storage\n    setLocalCustomTemplates(prev => [...prev, newTemplate]);\n    return newTemplate;\n  }, [createTemplateMutation]);\n\n  // Create template from an existing task\n  const createFromTask = useCallback(async (\n    task: Task,\n    name: string,\n    description: string,\n    category: TemplateCategory = 'custom',\n    icon: string = '⭐'\n  ): Promise<TaskTemplate> => {\n    const newTemplate = createTemplateFromTask(task, name, description, category, icon);\n\n    if (isAuthenticated()) {\n      try {\n        const result = await createTemplateMutation({\n          variables: {\n            input: {\n              name: newTemplate.name,\n              description: newTemplate.description,\n              category: newTemplate.category,\n              icon: newTemplate.icon,\n              defaultPriority: newTemplate.template?.priority || 'medium',\n              defaultCategory: newTemplate.template?.category || newTemplate.category,\n              subtaskTemplates: newTemplate.template?.subtasks?.map(s => ({\n                text: s.text,\n              })),\n            },\n          },\n        });\n        if (result.data?.createTemplate) {\n          return {\n            ...newTemplate,\n            id: result.data.createTemplate.id,\n            createdAt: new Date(result.data.createTemplate.createdAt).getTime(),\n          };\n        }\n      } catch (error) {\n        console.error('Failed to create template on server:', error);\n      }\n    }\n\n    // Fallback to local storage\n    setLocalCustomTemplates(prev => [...prev, newTemplate]);\n    return newTemplate;\n  }, [createTemplateMutation]);\n\n  // Update a custom template\n  const updateTemplate = useCallback(async (id: string, updates: Partial<TaskTemplate>) => {\n    if (isAuthenticated() && !id.startsWith('custom-')) {\n      try {\n        await updateTemplateMutation({\n          variables: {\n            id,\n            input: {\n              name: updates.name,\n              description: updates.description,\n              category: updates.category,\n              icon: updates.icon,\n              defaultPriority: updates.template?.priority,\n              defaultCategory: updates.template?.category,\n              subtaskTemplates: updates.template?.subtasks?.map(s => ({\n                text: s.text,\n              })),\n            },\n          },\n        });\n        return;\n      } catch (error) {\n        console.error('Failed to update template on server:', error);\n      }\n    }\n\n    // Fallback to local\n    setLocalCustomTemplates(prev =>\n      prev.map(t => (t.id === id ? { ...t, ...updates } : t))\n    );\n  }, [updateTemplateMutation]);\n\n  // Delete a custom template\n  const deleteTemplate = useCallback(async (id: string) => {\n    // Don't allow deleting built-in templates\n    if (id.startsWith('builtin-')) return;\n\n    if (isAuthenticated() && !id.startsWith('custom-')) {\n      try {\n        await deleteTemplateMutation({\n          variables: { id },\n        });\n        return;\n      } catch (error) {\n        console.error('Failed to delete template on server:', error);\n      }\n    }\n\n    // Fallback to local\n    setLocalCustomTemplates(prev => prev.filter(t => t.id !== id));\n  }, [deleteTemplateMutation]);\n\n  // Increment usage count for a template\n  const incrementUsage = useCallback(async (id: string) => {\n    // Update local usage stats\n    setUsageStats(prev => ({\n      ...prev,\n      [id]: (prev[id] || 0) + 1,\n    }));\n\n    // Note: Usage is tracked on the server when USE_TEMPLATE mutation is called\n  }, []);\n\n  // Get a single template by ID\n  const getTemplate = useCallback((id: string): TaskTemplate | undefined => {\n    return templates.find(t => t.id === id);\n  }, [templates]);\n\n  // Filter templates by category\n  const filterByCategory = useCallback((category?: TemplateCategory): TaskTemplate[] => {\n    if (!category) return templates;\n    return filterTemplates(templates, { category });\n  }, [templates]);\n\n  // Search templates\n  const searchTemplates = useCallback((query: string): TaskTemplate[] => {\n    return filterTemplates(templates, { searchQuery: query });\n  }, [templates]);\n\n  // Get most used templates\n  const getMostUsed = useCallback((limit: number = 5): TaskTemplate[] => {\n    // Use server data if available\n    if (isAuthenticated() && mostUsedData?.mostUsedTemplates) {\n      return mostUsedData.mostUsedTemplates.slice(0, limit).map((t: any) => ({\n        id: t.id,\n        name: t.name,\n        description: t.description || '',\n        category: t.category as TemplateCategory,\n        icon: t.icon || '⭐',\n        isBuiltIn: t.isBuiltIn || false,\n        createdAt: 0,\n        usageCount: t.usageCount || 0,\n        defaultPriority: 'medium' as const,\n        defaultCategory: t.category,\n        subtaskTemplates: [],\n      }));\n    }\n    return sortTemplatesByUsage(templates).slice(0, limit);\n  }, [templates, mostUsedData]);\n\n  const value: TemplateContextType = {\n    templates,\n    customTemplates,\n    builtInTemplates: BUILT_IN_TEMPLATES,\n    categories,\n    addTemplate,\n    createFromTask,\n    updateTemplate,\n    deleteTemplate,\n    incrementUsage,\n    getTemplate,\n    filterByCategory,\n    searchTemplates,\n    getMostUsed,\n  };\n\n  return (\n    <TemplateContext.Provider value={value}>\n      {children}\n    </TemplateContext.Provider>\n  );\n}\n\nexport function useTemplates() {\n  const context = useContext(TemplateContext);\n  if (!context) {\n    throw new Error('useTemplates must be used within a TemplateProvider');\n  }\n  return context;\n}\n\n// Export category config for use in components\nexport { CATEGORY_CONFIG };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}