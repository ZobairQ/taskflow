{"ast":null,"code":"import _objectSpread from \"/home/zobair-qauomi/todo_app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { print } from \"@apollo/client/utilities\";\nconst defaultHttpOptions = {\n  includeQuery: true,\n  includeExtensions: true,\n  preserveHeaderCase: false\n};\nconst defaultHeaders = {\n  // headers are case insensitive (https://stackoverflow.com/a/5259004)\n  accept: \"application/graphql-response+json,application/json;q=0.9\",\n  // The content-type header describes the type of the body of the request, and\n  // so it typically only is sent with requests that actually have bodies. One\n  // could imagine that Apollo Client would remove this header when constructing\n  // a GET request (which has no body), but we historically have not done that.\n  // This means that browsers will preflight all Apollo Client requests (even\n  // GET requests). Apollo Server's CSRF prevention feature (introduced in\n  // AS3.7) takes advantage of this fact and does not block requests with this\n  // header. If you want to drop this header from GET requests, then you should\n  // probably replace it with a `apollo-require-preflight` header, or servers\n  // with CSRF prevention enabled might block your GET request. See\n  // https://www.apollographql.com/docs/apollo-server/security/cors/#preventing-cross-site-request-forgery-csrf\n  // for more details.\n  \"content-type\": \"application/json\"\n};\nconst defaultOptions = {\n  method: \"POST\"\n};\nexport const fallbackHttpConfig = {\n  http: defaultHttpOptions,\n  headers: defaultHeaders,\n  options: defaultOptions\n};\nexport const defaultPrinter = (ast, printer) => printer(ast);\nexport function selectHttpOptionsAndBody(operation, fallbackConfig) {\n  for (var _len = arguments.length, configs = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    configs[_key - 2] = arguments[_key];\n  }\n  configs.unshift(fallbackConfig);\n  return selectHttpOptionsAndBodyInternal(operation, defaultPrinter, ...configs);\n}\nexport function selectHttpOptionsAndBodyInternal(operation, printer) {\n  let options = {};\n  let http = {};\n  for (var _len2 = arguments.length, configs = new Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n    configs[_key2 - 2] = arguments[_key2];\n  }\n  configs.forEach(config => {\n    var _config$http;\n    options = _objectSpread(_objectSpread(_objectSpread({}, options), config.options), {}, {\n      headers: _objectSpread(_objectSpread({}, options.headers), config.headers)\n    });\n    if (config.credentials) {\n      options.credentials = config.credentials;\n    }\n    options.headers.accept = (((_config$http = config.http) === null || _config$http === void 0 ? void 0 : _config$http.accept) || []).concat(options.headers.accept).join(\",\");\n    http = _objectSpread(_objectSpread({}, http), config.http);\n  });\n  options.headers = removeDuplicateHeaders(options.headers, http.preserveHeaderCase);\n  //The body depends on the http options\n  const {\n    operationName,\n    extensions,\n    variables,\n    query\n  } = operation;\n  const body = {\n    operationName,\n    variables\n  };\n  if (http.includeExtensions && Object.keys(extensions || {}).length) body.extensions = extensions;\n  // not sending the query (i.e persisted queries)\n  if (http.includeQuery) body.query = printer(query, print);\n  return {\n    options,\n    body\n  };\n}\n// Remove potential duplicate header names, preserving last (by insertion order).\n// This is done to prevent unintentionally duplicating a header instead of\n// overwriting it (See #8447 and #8449).\nfunction removeDuplicateHeaders(headers, preserveHeaderCase) {\n  // If we're not preserving the case, just remove duplicates w/ normalization.\n  if (!preserveHeaderCase) {\n    const normalizedHeaders = {};\n    Object.keys(Object(headers)).forEach(name => {\n      normalizedHeaders[name.toLowerCase()] = headers[name];\n    });\n    return normalizedHeaders;\n  }\n  // If we are preserving the case, remove duplicates w/ normalization,\n  // preserving the original name.\n  // This allows for non-http-spec-compliant servers that expect intentionally\n  // capitalized header names (See #6741).\n  const headerData = {};\n  Object.keys(Object(headers)).forEach(name => {\n    headerData[name.toLowerCase()] = {\n      originalName: name,\n      value: headers[name]\n    };\n  });\n  const normalizedHeaders = {};\n  Object.keys(headerData).forEach(name => {\n    normalizedHeaders[headerData[name].originalName] = headerData[name].value;\n  });\n  return normalizedHeaders;\n}","map":{"version":3,"names":["print","defaultHttpOptions","includeQuery","includeExtensions","preserveHeaderCase","defaultHeaders","accept","defaultOptions","method","fallbackHttpConfig","http","headers","options","defaultPrinter","ast","printer","selectHttpOptionsAndBody","operation","fallbackConfig","_len","arguments","length","configs","Array","_key","unshift","selectHttpOptionsAndBodyInternal","_len2","_key2","forEach","config","_config$http","_objectSpread","credentials","concat","join","removeDuplicateHeaders","operationName","extensions","variables","query","body","Object","keys","normalizedHeaders","name","toLowerCase","headerData","originalName","value"],"sources":["/home/zobair-qauomi/todo_app/node_modules/@apollo/src/link/http/selectHttpOptionsAndBody.ts"],"sourcesContent":["import type { ApolloLink } from \"@apollo/client/link\";\nimport { print } from \"@apollo/client/utilities\";\n\nimport type { BaseHttpLink } from \"./BaseHttpLink.js\";\n\ninterface HttpConfig {\n  http?: BaseHttpLink.HttpOptions;\n  options?: any;\n  headers?: Record<string, string>;\n  credentials?: any;\n}\n\nconst defaultHttpOptions: BaseHttpLink.HttpOptions = {\n  includeQuery: true,\n  includeExtensions: true,\n  preserveHeaderCase: false,\n};\n\nconst defaultHeaders = {\n  // headers are case insensitive (https://stackoverflow.com/a/5259004)\n  accept: \"application/graphql-response+json,application/json;q=0.9\",\n  // The content-type header describes the type of the body of the request, and\n  // so it typically only is sent with requests that actually have bodies. One\n  // could imagine that Apollo Client would remove this header when constructing\n  // a GET request (which has no body), but we historically have not done that.\n  // This means that browsers will preflight all Apollo Client requests (even\n  // GET requests). Apollo Server's CSRF prevention feature (introduced in\n  // AS3.7) takes advantage of this fact and does not block requests with this\n  // header. If you want to drop this header from GET requests, then you should\n  // probably replace it with a `apollo-require-preflight` header, or servers\n  // with CSRF prevention enabled might block your GET request. See\n  // https://www.apollographql.com/docs/apollo-server/security/cors/#preventing-cross-site-request-forgery-csrf\n  // for more details.\n  \"content-type\": \"application/json\",\n};\n\nconst defaultOptions = {\n  method: \"POST\",\n};\n\nexport const fallbackHttpConfig = {\n  http: defaultHttpOptions,\n  headers: defaultHeaders,\n  options: defaultOptions,\n};\n\nexport const defaultPrinter: BaseHttpLink.Printer = (ast, printer) =>\n  printer(ast);\n\nexport function selectHttpOptionsAndBody(\n  operation: ApolloLink.Operation,\n  fallbackConfig: HttpConfig,\n  ...configs: Array<HttpConfig>\n) {\n  configs.unshift(fallbackConfig);\n  return selectHttpOptionsAndBodyInternal(\n    operation,\n    defaultPrinter,\n    ...configs\n  );\n}\n\nexport function selectHttpOptionsAndBodyInternal(\n  operation: ApolloLink.Operation,\n  printer: BaseHttpLink.Printer,\n  ...configs: HttpConfig[]\n) {\n  let options = {} as HttpConfig & Record<string, any>;\n  let http = {} as BaseHttpLink.HttpOptions;\n\n  configs.forEach((config) => {\n    options = {\n      ...options,\n      ...config.options,\n      headers: {\n        ...options.headers,\n        ...config.headers,\n      },\n    };\n\n    if (config.credentials) {\n      options.credentials = config.credentials;\n    }\n\n    options.headers!.accept = (config.http?.accept || [])\n      .concat(options.headers!.accept)\n      .join(\",\");\n\n    http = {\n      ...http,\n      ...config.http,\n    };\n  });\n\n  options.headers = removeDuplicateHeaders(\n    options.headers!,\n    http.preserveHeaderCase\n  );\n\n  //The body depends on the http options\n  const { operationName, extensions, variables, query } = operation;\n  const body: BaseHttpLink.Body = { operationName, variables };\n\n  if (http.includeExtensions && Object.keys(extensions || {}).length)\n    (body as any).extensions = extensions;\n\n  // not sending the query (i.e persisted queries)\n  if (http.includeQuery) (body as any).query = printer(query, print);\n\n  return {\n    options,\n    body,\n  };\n}\n\n// Remove potential duplicate header names, preserving last (by insertion order).\n// This is done to prevent unintentionally duplicating a header instead of\n// overwriting it (See #8447 and #8449).\nfunction removeDuplicateHeaders(\n  headers: Record<string, string>,\n  preserveHeaderCase: boolean | undefined\n): typeof headers {\n  // If we're not preserving the case, just remove duplicates w/ normalization.\n  if (!preserveHeaderCase) {\n    const normalizedHeaders: Record<string, string> = {};\n    Object.keys(Object(headers)).forEach((name) => {\n      normalizedHeaders[name.toLowerCase()] = headers[name];\n    });\n    return normalizedHeaders;\n  }\n\n  // If we are preserving the case, remove duplicates w/ normalization,\n  // preserving the original name.\n  // This allows for non-http-spec-compliant servers that expect intentionally\n  // capitalized header names (See #6741).\n  const headerData: Record<string, { originalName: string; value: string }> =\n    {};\n  Object.keys(Object(headers)).forEach((name) => {\n    headerData[name.toLowerCase()] = {\n      originalName: name,\n      value: headers[name],\n    };\n  });\n\n  const normalizedHeaders: Record<string, string> = {};\n  Object.keys(headerData).forEach((name) => {\n    normalizedHeaders[headerData[name].originalName] = headerData[name].value;\n  });\n  return normalizedHeaders;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}