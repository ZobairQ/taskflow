{"ast":null,"code":"import { Trie } from \"@wry/trie\";\nimport { AutoCleanedWeakCache } from \"./caches.js\";\n/**\n * Naive alternative to `wrap` without any dependency tracking, potentially avoiding resulting memory leaks.\n */\nexport function memoize(fn, _ref) {\n  let {\n    max,\n    makeCacheKey = args => args\n  } = _ref;\n  const keys = new Trie(true);\n  const cache = new AutoCleanedWeakCache(max);\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    const cacheKey = keys.lookupArray(makeCacheKey(args));\n    const cached = cache.get(cacheKey);\n    if (cached) {\n      if (cached.error) {\n        throw cached.error;\n      }\n      return cached.result;\n    }\n    const entry = cache.set(cacheKey, {});\n    try {\n      return entry.result = fn(...args);\n    } catch (error) {\n      entry.error = error;\n      throw error;\n    }\n  };\n}","map":{"version":3,"names":["Trie","AutoCleanedWeakCache","memoize","fn","_ref","max","makeCacheKey","args","keys","cache","_len","arguments","length","Array","_key","cacheKey","lookupArray","cached","get","error","result","entry","set"],"sources":["/home/zobair-qauomi/todo_app/node_modules/@apollo/src/utilities/internal/memoize.ts"],"sourcesContent":["import { Trie } from \"@wry/trie\";\n\nimport { AutoCleanedWeakCache } from \"./caches.js\";\n\n/**\n * Naive alternative to `wrap` without any dependency tracking, potentially avoiding resulting memory leaks.\n */\nexport function memoize<TArgs extends any[], TResult>(\n  fn: (...args: TArgs) => TResult,\n  {\n    max,\n    makeCacheKey = (args) => args,\n  }: { max: number; makeCacheKey?: (args: TArgs) => [...any[]] }\n): (...args: TArgs) => TResult {\n  const keys = new Trie<{}>(true);\n  const cache = new AutoCleanedWeakCache<\n    {},\n    { result?: TResult; error?: unknown }\n  >(max);\n\n  return (...args: TArgs): TResult => {\n    const cacheKey = keys.lookupArray(makeCacheKey(args));\n    const cached = cache.get(cacheKey);\n    if (cached) {\n      if (cached.error) {\n        throw cached.error;\n      }\n      return cached.result!;\n    }\n\n    const entry = cache.set(cacheKey, {});\n    try {\n      return (entry.result = fn(...args));\n    } catch (error) {\n      entry.error = error;\n      throw error;\n    }\n  };\n}\n"],"mappings":"AAAA,SAASA,IAAI,QAAQ,WAAW;AAEhC,SAASC,oBAAoB,QAAQ,aAAa;AAElD;;;AAGA,OAAM,SAAUC,OAAOA,CACrBC,EAA+B,EAAAC,IAAA,EAI+B;EAAA,IAH9D;IACEC,GAAG;IACHC,YAAY,GAAIC,IAAI,IAAKA;EAAI,CAC+B,GAAAH,IAAA;EAE9D,MAAMI,IAAI,GAAG,IAAIR,IAAI,CAAK,IAAI,CAAC;EAC/B,MAAMS,KAAK,GAAG,IAAIR,oBAAoB,CAGpCI,GAAG,CAAC;EAEN,OAAO,YAA4B;IAAA,SAAAK,IAAA,GAAAC,SAAA,CAAAC,MAAA,EAAxBL,IAAW,OAAAM,KAAA,CAAAH,IAAA,GAAAI,IAAA,MAAAA,IAAA,GAAAJ,IAAA,EAAAI,IAAA;MAAXP,IAAW,CAAAO,IAAA,IAAAH,SAAA,CAAAG,IAAA;IAAA;IACpB,MAAMC,QAAQ,GAAGP,IAAI,CAACQ,WAAW,CAACV,YAAY,CAACC,IAAI,CAAC,CAAC;IACrD,MAAMU,MAAM,GAAGR,KAAK,CAACS,GAAG,CAACH,QAAQ,CAAC;IAClC,IAAIE,MAAM,EAAE;MACV,IAAIA,MAAM,CAACE,KAAK,EAAE;QAChB,MAAMF,MAAM,CAACE,KAAK;MACpB;MACA,OAAOF,MAAM,CAACG,MAAO;IACvB;IAEA,MAAMC,KAAK,GAAGZ,KAAK,CAACa,GAAG,CAACP,QAAQ,EAAE,EAAE,CAAC;IACrC,IAAI;MACF,OAAQM,KAAK,CAACD,MAAM,GAAGjB,EAAE,CAAC,GAAGI,IAAI,CAAC;IACpC,CAAC,CAAC,OAAOY,KAAK,EAAE;MACdE,KAAK,CAACF,KAAK,GAAGA,KAAK;MACnB,MAAMA,KAAK;IACb;EACF,CAAC;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}